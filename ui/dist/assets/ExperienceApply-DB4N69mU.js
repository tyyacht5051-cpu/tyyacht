import{_ as D,c as i,b as o,a as k,p as T,k as n,q as p,v as u,n as d,t as l,s as b,F as y,e as _,h as g,x as P,l as q,A as V,u as C,f as a}from"./index-B24G-8VQ.js";const S={name:"ExperienceApply",setup(){return{toast:C()}},data(){return{form:{name:"",birthDate:"",gender:"",phone:"",location:"",programType:"",subProgram:"",preferredDate:"",participants:"",companions:[],privacyAgreed:!1},errors:{},isSubmitting:!1,subPrograms:{크루즈요트체험:[{value:"한산대첩승전항로1",label:"한산대첩 승전항로 (1시간) - 25,000원"},{value:"한산대첩승전항로2",label:"한산대첩 승전항로 연장 (1시간 30분) - 30,000원"},{value:"이순신역사탐방",label:"이순신 역사 탐방 (2시간) - 35,000원"},{value:"힐링섬탐방1",label:"힐링 섬 탐방 (4시간) - 80,000원"},{value:"힐링섬탐방2",label:"힐링 섬 탐방 하루종일 (8시간) - 120,000원"},{value:"선셈체험",label:"선셋 체험 (1시간 30분) - 35,000원"}],딩기요트체험:[{value:"호비겟어웨이체험",label:"호비 겟어웨이 체험 (2-4시간)"},{value:"토파즈오메가체험",label:"토파즈 오메가 체험 (2-4시간)"}],패들보드체험:[{value:"6인용패들보드체험",label:"6인용 패들보드 체험 (2시간)"},{value:"1-2인용패들보드체험",label:"1-2인용 패들보드 체험 (2시간)"}]}}},methods:{validateForm(){if(this.errors={},this.form.name.trim()||(this.errors.name="이름을 입력해주세요"),this.form.birthDate||(this.errors.birthDate="생년월일을 선택해주세요"),this.form.gender||(this.errors.gender="성별을 선택해주세요"),this.form.phone.trim()?/^010-\d{4}-\d{4}$/.test(this.form.phone)||(this.errors.phone="올바른 연락처 형식이 아닙니다"):this.errors.phone="연락처를 입력해주세요",this.form.programType||(this.errors.programType="체험 프로그램을 선택해주세요"),this.form.programType&&!this.form.subProgram&&(this.errors.subProgram="세부 프로그램을 선택해주세요"),!this.form.preferredDate)this.errors.preferredDate="희망 날짜를 선택해주세요";else{const t=new Date(this.form.preferredDate),r=new Date;r.setHours(0,0,0,0),t<r&&(this.errors.preferredDate="오늘 이후 날짜를 선택해주세요")}return this.form.participants||(this.errors.participants="참가 인원을 선택해주세요"),this.form.location.trim()||(this.errors.location="소재지를 입력해주세요"),this.form.companions.forEach((t,r)=>{t.name.trim()||(this.errors[`companion_${r}_name`]="이름을 입력해주세요"),t.birthDate||(this.errors[`companion_${r}_birthDate`]="생년월일을 선택해주세요"),t.gender||(this.errors[`companion_${r}_gender`]="성별을 선택해주세요")}),this.form.privacyAgreed||(this.errors.privacyAgreed="개인정보 처리 동의는 필수입니다"),Object.keys(this.errors).length===0},async submitApplication(){if(!this.validateForm()){this.scrollToFirstError();return}this.isSubmitting=!0;try{const t={name:this.form.name,phone:this.form.phone,email:"",experience_date:this.form.preferredDate,participants:parseInt(this.form.participants)||1,experience_type:this.form.programType||"크루즈요트",representative:{name:this.form.name,birthDate:this.form.birthDate,gender:this.form.gender},companions:this.form.companions,location:this.form.location,special_requests:`프로그램: ${this.form.programType} - ${this.form.subProgram}
소재지: ${this.form.location}
동승자: ${this.form.companions.length}명`},r=await q.post(`${V}/api/applications/cruise`,t);r.status===201&&r.data.id&&(this.toast.celebrate(r.data.message||"체험 프로그램 신청이 성공적으로 접수되었습니다!"),this.$router.push("/"))}catch(t){console.error("신청 중 오류:",t),this.toast.error("신청 중 오류가 발생했습니다. 다시 시도해주세요.")}finally{this.isSubmitting=!1}},resetForm(){this.form={name:"",birthDate:"",phone:"",location:"",programType:"",subProgram:"",preferredDate:"",participants:"",companions:[],privacyAgreed:!1},this.errors={}},addCompanion(){this.form.companions.length<30&&this.form.companions.push({name:"",birthDate:"",gender:""})},removeCompanion(t){this.form.companions.splice(t,1),Object.keys(this.errors).filter(c=>c.startsWith(`companion_${t}_`)).forEach(c=>delete this.errors[c])},onProgramTypeChange(){this.form.subProgram="",delete this.errors.subProgram},getSubPrograms(t){return this.subPrograms[t]||[]},scrollToFirstError(){this.$nextTick(()=>{const t=document.querySelector(".form-control.error");t&&t.scrollIntoView({behavior:"smooth",block:"center"})})}},computed:{availableSubPrograms(){return this.getSubPrograms(this.form.programType)}},watch:{"form.participants":function(t,r){const c=parseInt(t)||0,h=this.form.companions.length,e=c-1;if(e>h)for(let m=h;m<e&&m<30;m++)this.addCompanion();else e<h&&this.form.companions.splice(e)},"form.programType":function(t,r){t!==r&&(this.form.subProgram="",delete this.errors.subProgram)}}},U={class:"page-content"},A={class:"container"},F={class:"experience-apply"},w={class:"form-section"},E={class:"card"},I={class:"card-body"},M={class:"grid grid-3"},B={class:"form-group"},N={key:0,class:"form-error"},x={class:"form-group"},O={key:0,class:"form-error"},j={class:"form-group"},K={key:0,class:"form-error"},L={class:"form-group"},z={key:0,class:"form-error"},H={class:"form-group"},R={key:0,class:"form-error"},W={class:"form-group"},G={key:0,class:"form-error"},J={key:0,class:"form-group"},Q=["value"],X={key:0,class:"form-error"},Y={class:"form-group"},Z=["min"],$={key:0,class:"form-error"},rr={class:"grid grid-1"},or={class:"form-group"},er=["value"],sr={key:0,class:"form-error"},tr={class:"companions-section"},ir={class:"companion-header"},ar=["onClick"],lr={class:"grid grid-3"},nr={class:"form-group"},mr=["onUpdate:modelValue"],pr={key:0,class:"form-error"},dr={class:"form-group"},fr=["onUpdate:modelValue"],ur={key:0,class:"form-error"},cr={class:"form-group"},vr=["onUpdate:modelValue"],br={key:0,class:"form-error"},hr={class:"add-companion-section"},gr=["disabled"],yr={class:"form-group"},_r={class:"checkbox-item privacy-agreement"},Dr={key:0,class:"form-error"},kr={class:"form-actions"},Tr=["disabled"],Pr=["disabled"],qr={key:0,class:"loading-spinner"};function Vr(t,r,c,h,e,m){return a(),i("div",U,[o("div",A,[o("div",F,[r[40]||(r[40]=k('<div class="page-header" data-v-7ab0a218><h1 class="section-title" data-v-7ab0a218>체험 프로그램 신청</h1><p class="section-subtitle" data-v-7ab0a218>다양한 해양 체험 프로그램에 참여하세요</p></div><div class="info-section" data-v-7ab0a218><div class="card" data-v-7ab0a218><div class="card-header" data-v-7ab0a218><h3 data-v-7ab0a218>체험 프로그램 소개</h3></div><div class="card-body" data-v-7ab0a218><div class="grid grid-3" data-v-7ab0a218><div class="qualification-item" data-v-7ab0a218><div class="qualification-icon" data-v-7ab0a218><i class="fas fa-ship" data-v-7ab0a218></i></div><h4 data-v-7ab0a218>크루즈 요트 체험</h4><p data-v-7ab0a218>대형 요트에서 편안한 크루즈 체험</p></div><div class="qualification-item" data-v-7ab0a218><div class="qualification-icon" data-v-7ab0a218><i class="fas fa-sailboat" data-v-7ab0a218></i></div><h4 data-v-7ab0a218>딩기 요트 체험</h4><p data-v-7ab0a218>소형 요트로 직접 조종해보는 실전 체험</p></div><div class="qualification-item" data-v-7ab0a218><div class="qualification-icon" data-v-7ab0a218><i class="fas fa-water" data-v-7ab0a218></i></div><h4 data-v-7ab0a218>패들보드 체험</h4><p data-v-7ab0a218>초보자도 쉬게 운동할 수 있는 SUP 체험</p></div></div></div></div></div>',2)),o("div",w,[o("div",E,[r[39]||(r[39]=o("div",{class:"card-header"},[o("h3",null,"신청서 작성")],-1)),o("div",I,[o("form",{onSubmit:r[14]||(r[14]=T((...s)=>m.submitApplication&&m.submitApplication(...s),["prevent"])),class:"application-form"},[r[36]||(r[36]=o("div",{class:"form-section-title"},[o("h4",null,"대표자 정보")],-1)),o("div",M,[o("div",B,[r[15]||(r[15]=o("label",{class:"form-label"},"이름 *",-1)),p(o("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=s=>e.form.name=s),class:d(["form-control",{error:e.errors.name}]),placeholder:"대표자 성함을 입력하세요",required:""},null,2),[[u,e.form.name]]),e.errors.name?(a(),i("div",N,l(e.errors.name),1)):n("",!0)]),o("div",x,[r[16]||(r[16]=o("label",{class:"form-label"},"생년월일 *",-1)),p(o("input",{type:"date","onUpdate:modelValue":r[1]||(r[1]=s=>e.form.birthDate=s),class:d(["form-control",{error:e.errors.birthDate}]),required:""},null,2),[[u,e.form.birthDate]]),e.errors.birthDate?(a(),i("div",O,l(e.errors.birthDate),1)):n("",!0)]),o("div",j,[r[18]||(r[18]=o("label",{class:"form-label"},"성별 *",-1)),p(o("select",{"onUpdate:modelValue":r[2]||(r[2]=s=>e.form.gender=s),class:d(["form-control form-select",{error:e.errors.gender}]),required:""},r[17]||(r[17]=[o("option",{value:""},"선택하세요",-1),o("option",{value:"M"},"남성",-1),o("option",{value:"F"},"여성",-1)]),2),[[b,e.form.gender]]),e.errors.gender?(a(),i("div",K,l(e.errors.gender),1)):n("",!0)])]),o("div",L,[r[19]||(r[19]=o("label",{class:"form-label"},"소재지 *",-1)),p(o("input",{type:"text","onUpdate:modelValue":r[3]||(r[3]=s=>e.form.location=s),class:d(["form-control",{error:e.errors.location}]),placeholder:"예: 경상남도 통영시",required:""},null,2),[[u,e.form.location]]),e.errors.location?(a(),i("div",z,l(e.errors.location),1)):n("",!0)]),o("div",H,[r[20]||(r[20]=o("label",{class:"form-label"},"연락처 *",-1)),p(o("input",{type:"tel","onUpdate:modelValue":r[4]||(r[4]=s=>e.form.phone=s),class:d(["form-control",{error:e.errors.phone}]),placeholder:"010-0000-0000",required:""},null,2),[[u,e.form.phone]]),e.errors.phone?(a(),i("div",R,l(e.errors.phone),1)):n("",!0)]),r[37]||(r[37]=o("div",{class:"form-section-title"},[o("h4",null,"체험 프로그램")],-1)),o("div",W,[r[22]||(r[22]=o("label",{class:"form-label"},"희망 체험 프로그램 *",-1)),p(o("select",{"onUpdate:modelValue":r[5]||(r[5]=s=>e.form.programType=s),class:d(["form-control form-select",{error:e.errors.programType}]),onChange:r[6]||(r[6]=(...s)=>m.onProgramTypeChange&&m.onProgramTypeChange(...s)),required:""},r[21]||(r[21]=[o("option",{value:""},"선택하세요",-1),o("option",{value:"크루즈요트체험"},"크루즈 요트 체험",-1),o("option",{value:"딩기요트체험"},"딩기 요트 체험",-1),o("option",{value:"패들보드체험"},"패들보드 체험",-1)]),34),[[b,e.form.programType]]),e.errors.programType?(a(),i("div",G,l(e.errors.programType),1)):n("",!0)]),e.form.programType?(a(),i("div",J,[r[24]||(r[24]=o("label",{class:"form-label"},"세부 프로그램 *",-1)),p(o("select",{"onUpdate:modelValue":r[7]||(r[7]=s=>e.form.subProgram=s),class:d(["form-control form-select",{error:e.errors.subProgram}]),required:""},[r[23]||(r[23]=o("option",{value:""},"선택하세요",-1)),(a(!0),i(y,null,_(m.getSubPrograms(e.form.programType),s=>(a(),i("option",{key:s.value,value:s.value},l(s.label),9,Q))),128))],2),[[b,e.form.subProgram]]),e.errors.subProgram?(a(),i("div",X,l(e.errors.subProgram),1)):n("",!0)])):n("",!0),o("div",Y,[r[25]||(r[25]=o("label",{class:"form-label"},"희망 체험 날짜 *",-1)),p(o("input",{type:"date","onUpdate:modelValue":r[8]||(r[8]=s=>e.form.preferredDate=s),class:d(["form-control",{error:e.errors.preferredDate}]),min:new Date().toISOString().split("T")[0],required:""},null,10,Z),[[u,e.form.preferredDate]]),e.errors.preferredDate?(a(),i("div",$,l(e.errors.preferredDate),1)):n("",!0)]),o("div",rr,[o("div",or,[r[27]||(r[27]=o("label",{class:"form-label"},"총 참가 인원 (대표자 포함) *",-1)),p(o("select",{"onUpdate:modelValue":r[9]||(r[9]=s=>e.form.participants=s),class:d(["form-control form-select",{error:e.errors.participants}]),required:""},[r[26]||(r[26]=o("option",{value:""},"선택하세요",-1)),(a(),i(y,null,_(31,s=>o("option",{key:s,value:s},l(s)+"명",9,er)),64))],2),[[b,e.form.participants]]),e.errors.participants?(a(),i("div",sr,l(e.errors.participants),1)):n("",!0)])]),r[38]||(r[38]=o("div",{class:"form-section-title"},[o("h4",null,"동승자 정보"),o("p",{class:"section-description"},"대표자를 제외한 동승자 정보를 입력해주세요 (최대 30명)")],-1)),o("div",tr,[(a(!0),i(y,null,_(e.form.companions,(s,f)=>(a(),i("div",{key:f,class:"companion-item"},[o("div",ir,[o("h5",null,"동승자 "+l(f+1),1),o("button",{type:"button",onClick:v=>m.removeCompanion(f),class:"remove-companion-btn"},r[28]||(r[28]=[o("i",{class:"fas fa-times"},null,-1),g(" 삭제 ",-1)]),8,ar)]),o("div",lr,[o("div",nr,[r[29]||(r[29]=o("label",{class:"form-label"},"이름 *",-1)),p(o("input",{type:"text","onUpdate:modelValue":v=>s.name=v,class:d(["form-control",{error:e.errors[`companion_${f}_name`]}]),placeholder:"이름을 입력하세요",required:""},null,10,mr),[[u,s.name]]),e.errors[`companion_${f}_name`]?(a(),i("div",pr,l(e.errors[`companion_${f}_name`]),1)):n("",!0)]),o("div",dr,[r[30]||(r[30]=o("label",{class:"form-label"},"생년월일 *",-1)),p(o("input",{type:"date","onUpdate:modelValue":v=>s.birthDate=v,class:d(["form-control",{error:e.errors[`companion_${f}_birthDate`]}]),required:""},null,10,fr),[[u,s.birthDate]]),e.errors[`companion_${f}_birthDate`]?(a(),i("div",ur,l(e.errors[`companion_${f}_birthDate`]),1)):n("",!0)]),o("div",cr,[r[32]||(r[32]=o("label",{class:"form-label"},"성별 *",-1)),p(o("select",{"onUpdate:modelValue":v=>s.gender=v,class:d(["form-control form-select",{error:e.errors[`companion_${f}_gender`]}]),required:""},r[31]||(r[31]=[o("option",{value:""},"선택하세요",-1),o("option",{value:"M"},"남성",-1),o("option",{value:"F"},"여성",-1)]),10,vr),[[b,s.gender]]),e.errors[`companion_${f}_gender`]?(a(),i("div",br,l(e.errors[`companion_${f}_gender`]),1)):n("",!0)])])]))),128)),o("div",hr,[o("button",{type:"button",onClick:r[10]||(r[10]=(...s)=>m.addCompanion&&m.addCompanion(...s)),class:"btn btn-outline-primary",disabled:e.form.companions.length>=30},[r[33]||(r[33]=o("i",{class:"fas fa-plus"},null,-1)),g(" 동승자 추가 ("+l(e.form.companions.length)+"/30) ",1)],8,gr)])]),o("div",yr,[o("label",_r,[p(o("input",{type:"checkbox","onUpdate:modelValue":r[11]||(r[11]=s=>e.form.privacyAgreed=s),class:d({error:e.errors.privacyAgreed}),required:""},null,2),[[P,e.form.privacyAgreed]]),r[34]||(r[34]=o("span",{class:"checkmark"},null,-1)),r[35]||(r[35]=g(" 개인정보 수집 및 이용에 동의합니다 * ",-1))]),e.errors.privacyAgreed?(a(),i("div",Dr," 개인정보 처리 동의는 필수입니다 ")):n("",!0)]),o("div",kr,[o("button",{type:"button",onClick:r[12]||(r[12]=(...s)=>m.resetForm&&m.resetForm(...s)),class:"btn btn-secondary",disabled:e.isSubmitting}," 초기화 ",8,Tr),o("button",{type:"submit",class:"btn btn-primary",disabled:e.isSubmitting,onClick:r[13]||(r[13]=(...s)=>t.action&&t.action(...s))},[e.isSubmitting?(a(),i("span",qr)):n("",!0),g(" "+l(e.isSubmitting?"제출 중...":"체험 신청"),1)],8,Pr)])],32)])])])])])])}const Sr=D(S,[["render",Vr],["__scopeId","data-v-7ab0a218"]]);export{Sr as default};
