import{_ as F,l as m,c as u,b as e,k as b,q as p,s as S,t as l,v,n as y,F as f,e as k,x as w,f as d,a as D,h as C,D as x,i as M,A as g,m as E,u as U}from"./index-9yIbVlal.js";const _="http://localhost:4001",L={name:"ExcelManager",props:{authToken:{type:String,required:!0}},data(){return{selectedCategory:"",loading:!1,data:[],filteredData:[],selectedRecords:[],totalRecords:0,currentPage:1,pageSize:10,filters:{startDate:"",endDate:"",status:""},exportHistory:[],tableColumns:[],editMode:!1,editedData:{},originalData:{}}},computed:{paginatedData(){const s=(this.currentPage-1)*this.pageSize;return this.filteredData.slice(s,s+this.pageSize)},totalPages(){return Math.ceil(this.filteredData.length/this.pageSize)},hasChanges(){return Object.keys(this.editedData).length>0}},methods:{getCategoryTitle(s){return{cruise:"ìŠ¹ì„ ì²´í—˜ ì‹ ì²­ì„œ",exemption:"ë©´ì œêµìœ¡ ì‹ ì²­ì„œ",education:"ìš”íŠ¸êµìœ¡ ì‹ ì²­ì„œ"}[s]||s},async loadCategoryData(){if(this.selectedCategory){console.log("Loading category data:",this.selectedCategory),console.log("Auth token:",this.authToken?"Present":"Missing"),this.loading=!0;try{const s=`${_}/api/applications/${this.selectedCategory}/export`;console.log("API URL:",s);const t=await m.get(s,{headers:{Authorization:`Bearer ${this.authToken}`}});this.data=t.data,this.applyFilters(),this.setupTableColumns()}catch(s){console.error("Failed to load data:",s);let t="ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";s.response?s.response.status===401?t="ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.":s.response.status===403?t="ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.":s.response.data?.error&&(t=s.response.data.error):s.request&&(t="ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."),this.$emit("error",t)}finally{this.loading=!1}}},setupTableColumns(){const s={cruise:[{key:"experienceType",label:"êµ¬ë¶„"},{key:"desiredDate",label:"ì‹ ì²­ë‚ ì§œ"},{key:"name",label:"ëŒ€í‘œì ëª…"},{key:"phone",label:"ì—°ë½ì²˜"},{key:"address_do",label:"ë„"},{key:"address_sigungu",label:"ì‹œ/êµ°"},{key:"adult_male",label:"ì„±ì¸(ë‚¨)"},{key:"adult_female",label:"ì„±ì¸(ì—¬)"},{key:"adult_total",label:"ì„±ì¸(ê³„)"},{key:"youth_male",label:"ì²­ì†Œë…„(ë‚¨)"},{key:"youth_female",label:"ì²­ì†Œë…„(ì—¬)"},{key:"youth_total",label:"ì²­ì†Œë…„(ê³„)"},{key:"total_participants",label:"ì´ê³„"},{key:"teens_male",label:"10ëŒ€(ë‚¨)"},{key:"teens_female",label:"10ëŒ€(ì—¬)"},{key:"twenties_male",label:"20ëŒ€(ë‚¨)"},{key:"twenties_female",label:"20ëŒ€(ì—¬)"},{key:"thirties_male",label:"30ëŒ€(ë‚¨)"},{key:"thirties_female",label:"30ëŒ€(ì—¬)"},{key:"forties_male",label:"40ëŒ€(ë‚¨)"},{key:"forties_female",label:"40ëŒ€(ì—¬)"},{key:"fifties_plus_male",label:"50ëŒ€~(ë‚¨)"},{key:"fifties_plus_female",label:"50ëŒ€~(ì—¬)"}],exemption:[{key:"name",label:"ì´ë¦„"},{key:"phone",label:"ì—°ë½ì²˜"},{key:"email",label:"ì´ë©”ì¼"},{key:"selected_date",label:"ì„ íƒë‚ ì§œ"},{key:"license",label:"ë©´í—ˆì¢…ë¥˜"},{key:"created_at",label:"ì‹ ì²­ì¼"}],education:[{key:"name",label:"ì´ë¦„"},{key:"phone",label:"ì—°ë½ì²˜"},{key:"email",label:"ì´ë©”ì¼"},{key:"course_type",label:"ê³¼ì •ìœ í˜•"},{key:"start_date",label:"ì‹œì‘ì¼"},{key:"status",label:"ìƒíƒœ"}]};this.tableColumns=s[this.selectedCategory]||[]},getColumnValue(s,t){const r=s[t];return t.includes("date")||t.includes("_at")?this.formatDate(r):t==="participants"?r+"ëª…":r||"-"},applyFilters(){this.filteredData=this.data.filter(s=>!(this.filters.startDate&&s.created_at<this.filters.startDate||this.filters.endDate&&s.created_at>this.filters.endDate||this.filters.status&&s.status!==this.filters.status)),this.totalRecords=this.filteredData.length,this.currentPage=1},selectAll(){this.selectedRecords=this.filteredData.map(s=>s.id),this.updateSelectAll()},deselectAll(){this.selectedRecords=[],this.updateSelectAll()},toggleAll(s){s.target.checked?this.selectAll():this.deselectAll()},updateSelectAll(){if(this.$refs.selectAllCheckbox){const s=this.filteredData.length,t=this.selectedRecords.length;this.$refs.selectAllCheckbox.indeterminate=t>0&&t<s,this.$refs.selectAllCheckbox.checked=t===s&&s>0}},async exportData(){if(this.selectedCategory){this.loading=!0;try{const s=this.selectedRecords.length>0?this.data.filter(o=>this.selectedRecords.includes(o.id)):this.filteredData,t=this.generateCSV(s),r="\uFEFF",c=new Blob([r+t],{type:"text/csv;charset=utf-8;"}),a=window.URL.createObjectURL(c),n=document.createElement("a");n.href=a,n.download=`${this.getCategoryTitle(this.selectedCategory)}_${new Date().toISOString().split("T")[0]}.csv`,n.click(),window.URL.revokeObjectURL(a),await this.saveExportHistory(s.length),await this.loadExportHistory(),this.$emit("success",`${s.length}ê±´ì˜ ë°ì´í„°ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.`)}catch(s){console.error("Export failed:",s),this.$emit("error","ì—‘ì…€ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{this.loading=!1}}},generateCSV(s){if(s.length===0)return"";const t=this.tableColumns.map(c=>c.label),r=s.map(c=>this.tableColumns.map(a=>{const n=this.getColumnValue(c,a.key);return`"${String(n).replace(/"/g,'""')}"`}));return[t.join(","),...r.map(c=>c.join(","))].join(`
`)},async saveExportHistory(s){try{await m.post(`${_}/api/excel/history`,{category:this.selectedCategory,recordCount:s,filters:this.filters},{headers:{Authorization:`Bearer ${this.authToken}`}})}catch(t){console.warn("Failed to save export history:",t)}},async loadExportHistory(){try{const s=await m.get(`${_}/api/excel/history`,{headers:{Authorization:`Bearer ${this.authToken}`}});this.exportHistory=s.data}catch(s){console.warn("Failed to load export history:",s)}},async deleteHistory(s){try{await m.delete(`${_}/api/excel/history/${s}`,{headers:{Authorization:`Bearer ${this.authToken}`}}),await this.loadExportHistory(),this.$emit("success","íˆìŠ¤í† ë¦¬ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch{this.$emit("error","íˆìŠ¤í† ë¦¬ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},async redownload(s){this.selectedCategory=s.category,this.filters=s.filters||{},await this.loadCategoryData(),await this.exportData()},formatDate(s){return s?new Date(s).toLocaleDateString("ko-KR"):"-"},toggleEditMode(){this.editMode&&this.hasChanges&&!confirm("í¸ì§‘ ì¤‘ì¸ ë‚´ìš©ì´ ìˆìŠµë‹ˆë‹¤. ì €ì¥í•˜ì§€ ì•Šê³  ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?")||(this.editMode=!this.editMode,this.editMode?this.backupOriginalData():(this.editedData={},this.originalData={}))},backupOriginalData(){this.originalData={},this.data.forEach(s=>{this.originalData[s.id]={...s}})},isEditableColumn(s){return!["id","created_at","updated_at","adult_total","youth_total","total_participants","infant_male","infant_female","teens_male","teens_female","twenties_male","twenties_female","thirties_male","thirties_female","forties_male","forties_female","fifties_plus_male","fifties_plus_female"].includes(s)},getColumnType(s){return{name:"text",phone:"text",email:"text",message:"text",address:"text",address_do:"select",address_sigungu:"text",desiredDate:"date",selected_date:"date",start_date:"date",participants:"number",adult_male:"number",adult_female:"number",adult_total:"number",youth_male:"number",youth_female:"number",youth_total:"number",total_participants:"number",status:"select",experienceType:"select",course_type:"select",license:"select",gender:"select"}[s]||"text"},getSelectOptions(s){return{status:[{value:"pending",label:"ëŒ€ê¸°ì¤‘"},{value:"approved",label:"ìŠ¹ì¸"},{value:"confirmed",label:"í™•ì •"},{value:"rejected",label:"ê±°ë¶€"},{value:"cancelled",label:"ì·¨ì†Œ"}],experienceType:[{value:"cruise",label:"í¬ë£¨ì¦ˆ ì²´í—˜"},{value:"dinghy",label:"ë”©ê¸° ì²´í—˜"},{value:"paddleboard",label:"íŒ¨ë“¤ë³´ë“œ ì²´í—˜"}],address_do:[{value:"ì„œìš¸íŠ¹ë³„ì‹œ",label:"ì„œìš¸íŠ¹ë³„ì‹œ"},{value:"ë¶€ì‚°ê´‘ì—­ì‹œ",label:"ë¶€ì‚°ê´‘ì—­ì‹œ"},{value:"ëŒ€êµ¬ê´‘ì—­ì‹œ",label:"ëŒ€êµ¬ê´‘ì—­ì‹œ"},{value:"ì¸ì²œê´‘ì—­ì‹œ",label:"ì¸ì²œê´‘ì—­ì‹œ"},{value:"ê´‘ì£¼ê´‘ì—­ì‹œ",label:"ê´‘ì£¼ê´‘ì—­ì‹œ"},{value:"ëŒ€ì „ê´‘ì—­ì‹œ",label:"ëŒ€ì „ê´‘ì—­ì‹œ"},{value:"ìš¸ì‚°ê´‘ì—­ì‹œ",label:"ìš¸ì‚°ê´‘ì—­ì‹œ"},{value:"ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ",label:"ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ"},{value:"ê²½ê¸°ë„",label:"ê²½ê¸°ë„"},{value:"ê°•ì›ë„",label:"ê°•ì›ë„"},{value:"ì¶©ì²­ë¶ë„",label:"ì¶©ì²­ë¶ë„"},{value:"ì¶©ì²­ë‚¨ë„",label:"ì¶©ì²­ë‚¨ë„"},{value:"ì „ë¼ë¶ë„",label:"ì „ë¼ë¶ë„"},{value:"ì „ë¼ë‚¨ë„",label:"ì „ë¼ë‚¨ë„"},{value:"ê²½ìƒë¶ë„",label:"ê²½ìƒë¶ë„"},{value:"ê²½ìƒë‚¨ë„",label:"ê²½ìƒë‚¨ë„"},{value:"ì œì£¼íŠ¹ë³„ìì¹˜ë„",label:"ì œì£¼íŠ¹ë³„ìì¹˜ë„"}],course_type:[{value:"basic",label:"ê¸°ì´ˆ ê³¼ì •"},{value:"intermediate",label:"ì¤‘ê¸‰ ê³¼ì •"},{value:"advanced",label:"ê³ ê¸‰ ê³¼ì •"}],license:[{value:"1ê¸‰",label:"1ê¸‰"},{value:"2ê¸‰",label:"2ê¸‰"},{value:"3ê¸‰",label:"3ê¸‰"}],gender:[{value:"M",label:"ë‚¨ì„±"},{value:"F",label:"ì—¬ì„±"}]}[s]||[]},getEditValue(s,t){if(this.editedData[s]&&this.editedData[s][t]!==void 0)return this.editedData[s][t];const r=this.data.find(a=>a.id===s);if(!r)return"";let c=r[t];return this.getColumnType(t)==="date"&&c?new Date(c).toISOString().split("T")[0]:c||""},updateEditValue(s,t,r){this.editedData[s]||this.$set(this.editedData,s,{}),this.$set(this.editedData[s],t,r),this.selectedCategory==="cruise"&&this.calculateDemographicTotals(s,t)},calculateDemographicTotals(s,t){if(!this.editedData[s])return;const r={...this.editedData[s]},c=this.data.find(n=>n.id===s)||{},a=n=>r[n]!==void 0?parseInt(r[n]||0):parseInt(c[n]||0);if(["adult_male","adult_female"].includes(t)){const n=a("adult_male"),o=a("adult_female"),i=n+o;this.$set(this.editedData[s],"adult_total",i)}if(["youth_male","youth_female"].includes(t)){const n=a("youth_male"),o=a("youth_female"),i=n+o;this.$set(this.editedData[s],"youth_total",i)}if(["adult_male","adult_female","youth_male","youth_female"].includes(t)){const n=a("adult_total"),o=a("youth_total"),i=n+o;this.$set(this.editedData[s],"total_participants",i)}},validateInput(s,t,r){return t==="email"&&r&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?(this.$emit("error","ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤."),!1):t==="phone"&&r&&!/^[\d-]{10,13}$/.test(r.replace(/\s/g,""))?(this.$emit("error","ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤."),!1):!0},hasChanged(s,t){return this.editedData[s]&&this.editedData[s][t]!==void 0},async saveChanges(){if(this.hasChanges)try{this.loading=!0;for(const s of Object.keys(this.editedData)){const t=this.editedData[s];await m.patch(`${_}/api/applications/${this.selectedCategory}/${s}`,t,{headers:{Authorization:`Bearer ${this.authToken}`}})}for(const s of Object.keys(this.editedData)){const t=this.data.find(r=>r.id==s);t&&Object.assign(t,this.editedData[s])}this.editedData={},this.originalData={},this.$emit("success","ë³€ê²½ì‚¬í•­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(s){console.error("Failed to save changes:",s),this.$emit("error","ë³€ê²½ì‚¬í•­ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{this.loading=!1}},cancelChanges(){confirm("í¸ì§‘ ì¤‘ì¸ ëª¨ë“  ë³€ê²½ì‚¬í•­ì´ ì·¨ì†Œë©ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(this.editedData={},this.originalData={},this.$emit("success","í¸ì§‘ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤."))}},async mounted(){await this.loadExportHistory()}},V={class:"excel-manager"},B={class:"excel-header"},P={class:"export-options"},I=["disabled"],R={key:0,class:"data-preview"},N={class:"category-info"},O={class:"filters"},j={class:"filter-group"},z={key:0,class:"filter-group"},H={class:"data-table"},q={class:"table-controls"},Y={class:"selected-count"},W={key:2,class:"changes-count"},G={class:"table-wrapper"},J=["value"],K={key:0,class:"edit-cell"},Q=["value","onInput","onBlur"],X=["value","onInput"],Z=["value","onChange"],$=["value"],tt=["value","onInput"],et=["value","onInput"],st={class:"pagination"},it=["disabled"],at=["disabled"],nt={key:1,class:"excel-history"},lt={class:"history-list"},ot={class:"history-info"},rt={class:"category"},dt={class:"date"},ut={class:"count"},ct={class:"history-actions"},ht=["onClick"],pt=["onClick"];function gt(s,t,r,c,a,n){return d(),u("div",V,[e("div",B,[t[20]||(t[20]=e("h3",null,"ğŸ“Š ì—‘ì…€ íŒŒì¼ ê´€ë¦¬",-1)),e("div",P,[p(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.selectedCategory=o),onChange:t[1]||(t[1]=(...o)=>n.loadCategoryData&&n.loadCategoryData(...o))},t[19]||(t[19]=[e("option",{value:""},"ì¹´í…Œê³ ë¦¬ ì„ íƒ",-1),e("option",{value:"cruise"},"ìŠ¹ì„ ì²´í—˜ ì‹ ì²­ì„œ",-1),e("option",{value:"exemption"},"ë©´ì œêµìœ¡ ì‹ ì²­ì„œ",-1),e("option",{value:"education"},"ìš”íŠ¸êµìœ¡ ì‹ ì²­ì„œ",-1)]),544),[[S,a.selectedCategory]]),e("button",{onClick:t[2]||(t[2]=(...o)=>n.exportData&&n.exportData(...o)),disabled:!a.selectedCategory||a.loading,class:"export-btn"},l(a.loading?"ìƒì„± ì¤‘...":"ğŸ“¥ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ"),9,I)])]),a.selectedCategory?(d(),u("div",R,[e("div",N,[e("h4",null,l(n.getCategoryTitle(a.selectedCategory)),1),e("p",null,"ì´ "+l(a.totalRecords)+"ê±´ì˜ ë°ì´í„°",1)]),e("div",O,[e("div",j,[t[21]||(t[21]=e("label",null,"ê¸°ê°„ í•„í„°:",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=o=>a.filters.startDate=o),onChange:t[4]||(t[4]=(...o)=>n.applyFilters&&n.applyFilters(...o))},null,544),[[v,a.filters.startDate]]),t[22]||(t[22]=e("span",null,"~",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=o=>a.filters.endDate=o),onChange:t[6]||(t[6]=(...o)=>n.applyFilters&&n.applyFilters(...o))},null,544),[[v,a.filters.endDate]])]),a.selectedCategory!=="exemption"?(d(),u("div",z,[t[24]||(t[24]=e("label",null,"ìƒíƒœ í•„í„°:",-1)),p(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>a.filters.status=o),onChange:t[8]||(t[8]=(...o)=>n.applyFilters&&n.applyFilters(...o))},t[23]||(t[23]=[e("option",{value:""},"ì „ì²´",-1),e("option",{value:"pending"},"ëŒ€ê¸°ì¤‘",-1),e("option",{value:"approved"},"ìŠ¹ì¸",-1),e("option",{value:"rejected"},"ê±°ë¶€",-1)]),544),[[S,a.filters.status]])])):b("",!0)]),e("div",H,[e("div",q,[e("button",{onClick:t[9]||(t[9]=(...o)=>n.selectAll&&n.selectAll(...o)),class:"select-btn"},"ì „ì²´ ì„ íƒ"),e("button",{onClick:t[10]||(t[10]=(...o)=>n.deselectAll&&n.deselectAll(...o)),class:"select-btn"},"ì„ íƒ í•´ì œ"),e("button",{onClick:t[11]||(t[11]=(...o)=>n.toggleEditMode&&n.toggleEditMode(...o)),class:y(["edit-btn",{active:a.editMode}])},l(a.editMode?"í¸ì§‘ ì™„ë£Œ":"í¸ì§‘ ëª¨ë“œ"),3),a.editMode&&n.hasChanges?(d(),u("button",{key:0,onClick:t[12]||(t[12]=(...o)=>n.saveChanges&&n.saveChanges(...o)),class:"save-btn"}," ë³€ê²½ì‚¬í•­ ì €ì¥ ")):b("",!0),a.editMode&&n.hasChanges?(d(),u("button",{key:1,onClick:t[13]||(t[13]=(...o)=>n.cancelChanges&&n.cancelChanges(...o)),class:"cancel-btn"}," ì·¨ì†Œ ")):b("",!0),e("span",Y,l(a.selectedRecords.length)+"ê°œ ì„ íƒë¨",1),a.editMode&&n.hasChanges?(d(),u("span",W,l(Object.keys(a.editedData).length)+"ê°œ ìˆ˜ì •ë¨",1)):b("",!0)]),e("div",G,[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{type:"checkbox",onChange:t[14]||(t[14]=(...o)=>n.toggleAll&&n.toggleAll(...o)),ref:"selectAllCheckbox"},null,544)]),(d(!0),u(f,null,k(a.tableColumns,o=>(d(),u("th",{key:o.key},l(o.label),1))),128))])]),e("tbody",null,[(d(!0),u(f,null,k(n.paginatedData,o=>(d(),u("tr",{key:o.id},[e("td",null,[p(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[15]||(t[15]=i=>a.selectedRecords=i),onChange:t[16]||(t[16]=(...i)=>n.updateSelectAll&&n.updateSelectAll(...i))},null,40,J),[[w,a.selectedRecords]])]),(d(!0),u(f,null,k(a.tableColumns,i=>(d(),u("td",{key:i.key,class:y({"editable-cell":a.editMode&&n.isEditableColumn(i.key)})},[a.editMode&&n.isEditableColumn(i.key)?(d(),u("div",K,[n.getColumnType(i.key)==="text"?(d(),u("input",{key:0,type:"text",value:n.getEditValue(o.id,i.key),onInput:h=>n.updateEditValue(o.id,i.key,h.target.value),onBlur:h=>n.validateInput(o.id,i.key,h.target.value),class:"cell-input"},null,40,Q)):n.getColumnType(i.key)==="date"?(d(),u("input",{key:1,type:"date",value:n.getEditValue(o.id,i.key),onInput:h=>n.updateEditValue(o.id,i.key,h.target.value),class:"cell-input"},null,40,X)):n.getColumnType(i.key)==="select"?(d(),u("select",{key:2,value:n.getEditValue(o.id,i.key),onChange:h=>n.updateEditValue(o.id,i.key,h.target.value),class:"cell-select"},[(d(!0),u(f,null,k(n.getSelectOptions(i.key),h=>(d(),u("option",{key:h.value,value:h.value},l(h.label),9,$))),128))],40,Z)):n.getColumnType(i.key)==="number"?(d(),u("input",{key:3,type:"number",value:n.getEditValue(o.id,i.key),onInput:h=>n.updateEditValue(o.id,i.key,h.target.value),class:"cell-input"},null,40,tt)):(d(),u("input",{key:4,type:"text",value:n.getEditValue(o.id,i.key),onInput:h=>n.updateEditValue(o.id,i.key,h.target.value),class:"cell-input"},null,40,et))])):(d(),u("span",{key:1,class:y({"changed-cell":n.hasChanged(o.id,i.key)})},l(n.getColumnValue(o,i.key)),3))],2))),128))]))),128))])])]),e("div",st,[e("button",{onClick:t[17]||(t[17]=o=>a.currentPage--),disabled:a.currentPage<=1},"ì´ì „",8,it),e("span",null,l(a.currentPage)+" / "+l(n.totalPages),1),e("button",{onClick:t[18]||(t[18]=o=>a.currentPage++),disabled:a.currentPage>=n.totalPages},"ë‹¤ìŒ",8,at)])])])):b("",!0),a.exportHistory.length>0?(d(),u("div",nt,[t[25]||(t[25]=e("h4",null,"ğŸ“‹ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ íˆìŠ¤í† ë¦¬",-1)),e("div",lt,[(d(!0),u(f,null,k(a.exportHistory,o=>(d(),u("div",{key:o.id,class:"history-item"},[e("div",ot,[e("span",rt,l(n.getCategoryTitle(o.category)),1),e("span",dt,l(n.formatDate(o.createdAt)),1),e("span",ut,l(o.recordCount)+"ê±´",1)]),e("div",ct,[e("button",{onClick:i=>n.redownload(o),class:"redownload-btn"},"ì¬ë‹¤ìš´ë¡œë“œ",8,ht),e("button",{onClick:i=>n.deleteHistory(o.id),class:"delete-btn"},"ì‚­ì œ",8,pt)])]))),128))])])):b("",!0)])}const mt=F(L,[["render",gt],["__scopeId","data-v-e0084c23"]]),yt={name:"Admin",components:{ExcelManager:mt},setup(){return{toast:U()}},data(){return{authStore:E,activeTab:"users",users:[],loginLogs:[],isServerVerifiedAdmin:!1,isLoading:!1,stats:{},currentDate:new Date,selectedDates:[],isMonthClosed:!1,schedules:{},applications:[],applicationStats:{},applicationFilters:{startDate:"",endDate:"",courseType:"",status:""},boardingApplications:[],boardingStats:{},boardingFilters:{status:"",experienceType:"",startDate:"",endDate:""},boardingCurrentPage:1,boardingItemsPerPage:10,educationApplications:[],educationStats:{},educationFilters:{status:"",courseType:"",startDate:"",endDate:""},notices:[],noticeFilters:{category:"",startDate:"",endDate:""},editingNotice:null,editForm:{title:"",content:"",category_id:"",important:!1},communityPosts:[],communityPhotos:[],communityVideos:[],communityReviews:[],communityCrews:[],communityFilters:{contentType:"",board:"",startDate:"",endDate:""},activeSettingsTab:"general",settingsChanged:!1,isSavingSettings:!1,settingsTabs:[{key:"general",label:"ê¸°ë³¸ ì„¤ì •",icon:"fas fa-cog"},{key:"notifications",label:"ì•Œë¦¼ ì„¤ì •",icon:"fas fa-bell"},{key:"system",label:"ì‹œìŠ¤í…œ",icon:"fas fa-server"},{key:"security",label:"ë³´ì•ˆ",icon:"fas fa-shield-alt"},{key:"theme",label:"í…Œë§ˆ",icon:"fas fa-palette"},{key:"account",label:"ê´€ë¦¬ì ê³„ì •",icon:"fas fa-user-cog"}],siteSettings:{siteName:"í†µì˜ìš”íŠ¸í•™êµ",siteDescription:"ë°”ë‹¤ì—ì„œ ê¿ˆì„ í¼ì¹˜ëŠ” ìµœê³ ì˜ ìš”íŠ¸êµìœ¡ê¸°ê´€",phone:"055-641-5051~2",email:"ty6415051@hanmail.net",address:"ê²½ë‚¨ í†µì˜ì‹œ ë„ë‚¨ë¡œ 269-28",businessHours:"í‰ì¼ 09:00 - 18:00",logoUrl:"",faviconUrl:""},notificationSettings:{emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,newApplicationAlert:!0,systemMaintenanceAlert:!0,newsletterEnabled:!0,scheduleReminder:!0,adminEmail:"admin@tyyacht.com"},systemSettings:{maintenanceMode:!1,backupSchedule:"daily",cacheEnabled:!0,debugMode:!1,logLevel:"info",lastBackup:null},dbStatus:{connected:!0,lastChecked:null},isBackupInProgress:!1,securitySettings:{sessionTimeout:3600,maxLoginAttempts:5,requireStrongPassword:!0,twoFactorAuth:!1,ipWhitelist:"",autoLogout:!0},themeSettings:{primaryColor:"#2c5aa0",secondaryColor:"#1e3d6f",accentColor:"#ff6b35",darkMode:!1,customCSS:"",fontFamily:"Noto Sans KR"},adminAccount:{username:"",email:"",fullName:"",role:"admin",lastLogin:null,permissions:{manageUsers:!0,manageNotices:!0,manageApplications:!0,manageSystem:!0}}}},computed:{isAdmin(){return this.authStore.state.isAuthenticated&&this.authStore.isAdmin()&&this.isServerVerifiedAdmin},isSuperAdmin(){return this.authStore.state.isAuthenticated&&this.authStore.isSuperAdmin()&&this.isServerVerifiedAdmin},currentUser(){return this.authStore.state.user||{}},filteredCommunityItems(){let s=[];const t=this.communityPosts.map(o=>({...o,type:"post"})),r=this.communityPhotos.map(o=>({...o,type:"photo"})),c=this.communityVideos.map(o=>({...o,type:"video"})),a=this.communityReviews.map(o=>({...o,type:"review"})),n=this.communityCrews.map(o=>({...o,type:"crew"}));return s=[...t,...r,...c,...a,...n],this.communityFilters.contentType&&(s=s.filter(o=>o.type===this.communityFilters.contentType)),this.communityFilters.board&&(s=s.filter(o=>o.category===this.communityFilters.board)),this.communityFilters.startDate&&(s=s.filter(o=>o.date>=this.communityFilters.startDate)),this.communityFilters.endDate&&(s=s.filter(o=>o.date<=this.communityFilters.endDate)),s.sort((o,i)=>new Date(i.date)-new Date(o.date))},currentMonthYear(){return this.currentDate.toLocaleDateString("ko-KR",{year:"numeric",month:"long"})},calendarDays(){const s=this.currentDate.getFullYear(),t=this.currentDate.getMonth(),r=new Date(s,t,1),c=new Date(r);c.setDate(c.getDate()-r.getDay());const a=[],n=new Date;n.setHours(0,0,0,0);for(let o=0;o<42;o++){const i=new Date(c);i.setDate(c.getDate()+o);const h=i.toISOString().split("T")[0],T=i.getMonth()===t,A=i<n;a.push({date:h,day:i.getDate(),isCurrentMonth:T,isPast:A,isSelected:this.selectedDates.includes(h)})}return a}},async mounted(){if(await this.verifyAdminWithServer(),!this.isAdmin){this.$router.push("/login");return}try{await this.loadSettings(),await this.loadUsers(),await this.loadStats(),await this.loadSchedules(),await this.loadApplications(),await this.loadApplicationStats(),this.activeTab==="boarding"&&(await this.loadBoardingApplications(),await this.loadBoardingStats())}catch(s){console.error("Failed to load admin data:",s),(s.response?.status===401||s.response?.status===403)&&(this.toast.urgent("ê´€ë¦¬ì ê¶Œí•œì´ ì—†ê±°ë‚˜ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."),this.$router.push("/login"))}},methods:{async verifyAdminWithServer(){try{const s=await fetch(`${g}/api/admin/verify-admin`,{method:"GET",headers:{Authorization:`Bearer ${this.authStore.state.token}`,"Content-Type":"application/json"}});if(s.ok){const t=await s.json();this.isServerVerifiedAdmin=t.isAdmin,console.log("ğŸ” ì„œë²„ ì¸¡ ê´€ë¦¬ì ê¶Œí•œ ê²€ì¦ ì„±ê³µ:",t)}else console.warn("âš ï¸ ì„œë²„ ì¸¡ ê´€ë¦¬ì ê¶Œí•œ ê²€ì¦ ì‹¤íŒ¨:",s.status),this.isServerVerifiedAdmin=!1,(s.status===401||s.status===403)&&(this.authStore.logout(),this.$router.push("/login"))}catch(s){console.error("âŒ ì„œë²„ ì¸¡ ê´€ë¦¬ì ê¶Œí•œ ê²€ì¦ ì¤‘ ì˜¤ë¥˜:",s),this.isServerVerifiedAdmin=!1}},async loadSettings(){try{const s=localStorage.getItem("adminSettings");if(s){const t=JSON.parse(s);t.site&&(this.siteSettings={...this.siteSettings,...t.site}),t.notifications&&(this.notificationSettings={...this.notificationSettings,...t.notifications}),t.system&&(this.systemSettings={...this.systemSettings,...t.system}),t.security&&(this.securitySettings={...this.securitySettings,...t.security}),t.theme&&(this.themeSettings={...this.themeSettings,...t.theme}),t.admin&&(this.adminAccount={...this.adminAccount,...t.admin}),this.applyThemeSettings()}}catch(s){console.error("ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:",s)}},async saveAllSettings(){if(this.settingsChanged){this.isSavingSettings=!0;try{const s={site:this.siteSettings,notifications:this.notificationSettings,system:this.systemSettings,security:this.securitySettings,theme:this.themeSettings,admin:this.adminAccount,lastUpdated:new Date().toISOString()};localStorage.setItem("adminSettings",JSON.stringify(s)),this.applyThemeSettings(),this.settingsChanged=!1,this.showToast("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.","success")}catch(s){console.error("ì„¤ì • ì €ì¥ ì˜¤ë¥˜:",s),this.showToast("ì„¤ì • ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}finally{this.isSavingSettings=!1}}},applyThemeSettings(){const s=document.documentElement;s.style.setProperty("--primary-color",this.themeSettings.primaryColor),s.style.setProperty("--secondary-color",this.themeSettings.secondaryColor),s.style.setProperty("--accent-color",this.themeSettings.accentColor),this.themeSettings.darkMode?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),this.themeSettings.fontFamily&&s.style.setProperty("--font-family",this.themeSettings.fontFamily)},markSettingsChanged(){this.settingsChanged=!0},async uploadLogo(s){const t=s.target.files[0];if(!t)return;const r=new FormData;r.append("logo",t);try{const c=await fetch("/api/settings/logo",{method:"POST",headers:{Authorization:`Bearer ${this.authStore.state.token}`},body:r});if(c.ok){const a=await c.json();this.siteSettings.logoUrl=a.logoUrl,this.markSettingsChanged()}}catch{this.showToast("ë¡œê³  ì—…ë¡œë“œ ì‹¤íŒ¨","error")}},async performSystemBackup(){try{this.showToast("ë°±ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤...","info"),setTimeout(()=>{this.systemSettings.lastBackup=new Date().toISOString(),this.markSettingsChanged(),this.showToast("ë°±ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.","success")},2e3)}catch{this.showToast("ë°±ì—… ì‹¤í–‰ ì‹¤íŒ¨","error")}},async createBackup(){if(!this.isBackupInProgress){this.isBackupInProgress=!0;try{this.showToast("ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…ì„ ìƒì„±í•˜ëŠ” ì¤‘...","info"),setTimeout(async()=>{const s={timestamp:new Date().toISOString(),version:"1.0.0",data:"backup-content-placeholder"},t=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(t),c=document.createElement("a");c.href=r,c.download=`tyyacht-backup-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(r),this.systemSettings.lastBackup=new Date().toISOString(),this.markSettingsChanged(),this.isBackupInProgress=!1,this.showToast("ë°±ì—… íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.","success")},2e3)}catch{this.isBackupInProgress=!1,this.showToast("ë°±ì—… ìƒì„± ì‹¤íŒ¨","error")}}},async checkDatabase(){try{this.showToast("ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ í™•ì¸í•˜ëŠ” ì¤‘...","info"),setTimeout(()=>{this.dbStatus.connected=!0,this.dbStatus.lastChecked=new Date().toISOString(),this.showToast("ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì´ ì •ìƒì…ë‹ˆë‹¤.","success")},1e3)}catch{this.dbStatus.connected=!1,this.dbStatus.lastChecked=new Date().toISOString(),this.showToast("ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨","error")}},async clearCache(){try{if(this.showToast("ìºì‹œë¥¼ ì‚­ì œí•˜ëŠ” ì¤‘...","info"),"caches"in window){const s=await caches.keys();await Promise.all(s.map(t=>caches.delete(t)))}setTimeout(()=>{this.showToast("ìºì‹œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.","success")},1e3)}catch{this.showToast("ìºì‹œ ì‚­ì œ ì‹¤íŒ¨","error")}},selectSettingsTab(s){this.activeSettingsTab=s},showToast(s,t="info"){const r=document.createElement("div");r.className=`toast toast-${t}`,r.textContent=s,r.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 24px;
        background: ${t==="success"?"#4caf50":t==="error"?"#f44336":"#2196f3"};
        color: white;
        border-radius: 4px;
        z-index: 9999;
        transition: opacity 0.3s;
      `,document.body.appendChild(r),setTimeout(()=>{r.style.opacity="0",setTimeout(()=>document.body.removeChild(r),300)},3e3)},async loadStats(){try{const s=await m.get(`${g}/api/admin/stats`);this.stats=s.data}catch(s){console.error("Failed to load stats:",s)}},async loadUsers(){try{const s=await m.get(`${g}/api/admin/users`);this.users=s.data}catch(s){console.error("Failed to load users:",s),this.toast.error("ì‚¬ìš©ì ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},async loadLoginLogs(){try{const s=await m.get(`${g}/api/admin/logs`);this.loginLogs=s.data.logs||[]}catch(s){console.error("Failed to load login logs:",s),this.toast.error("ë¡œê·¸ì¸ ê¸°ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},async toggleUserStatus(s){if(s.role==="admin"){this.toast.warning("ê´€ë¦¬ì ê³„ì •ì€ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}try{const t=localStorage.getItem("token");await m.patch(`${g}/api/admin/users/${s.id}/toggle-status`,{},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),s.is_active=!s.is_active,this.toast.success(`ì‚¬ìš©ì ìƒíƒœê°€ ${s.is_active?"í™œì„±í™”":"ë¹„í™œì„±í™”"}ë˜ì—ˆìŠµë‹ˆë‹¤.`)}catch(t){console.error("Failed to toggle user status:",t),this.toast.error("ì‚¬ìš©ì ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},async refreshUsers(){await this.loadUsers()},async refreshLogs(){this.activeTab==="logs"&&this.loginLogs.length===0?await this.loadLoginLogs():await this.loadLoginLogs()},async checkDatabase(){try{await m.get(`${g}/api/admin/database-status`),this.toast.success("ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì´ ì •ìƒì ì…ë‹ˆë‹¤.","âœ“ ì—°ê²° ì„±ê³µ")}catch(s){console.error("Database check failed:",s),this.toast.error("ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì— ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.","âš  ì—°ê²° ì‹¤íŒ¨")}},async loadBoardingApplications(){try{const s=await m.get(`${g}/api/applications/cruise`,{params:{status:this.boardingFilters.status,limit:this.boardingItemsPerPage,offset:(this.boardingCurrentPage-1)*this.boardingItemsPerPage}});this.boardingApplications=(s.data||[]).map(t=>({id:t.id,name:t.name,phone:t.phone,email:t.email,experienceType:"cruise",duration:this.extractDurationFromSpecialRequests(t.special_requests),desiredDate:t.experience_date,participants:t.participants,status:this.mapCruiseStatusToBoardingStatus(t.status),createdAt:t.created_at,message:t.special_requests||""}))}catch(s){console.error("Failed to load boarding applications:",s),this.boardingApplications=[],this.toast&&this.toast.error("ìŠ¹ì„  ì²´í—˜ ì‹ ì²­ì„œ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},async loadBoardingStats(){try{const s=await m.get(`${g}/api/applications/stats`),t=s.data&&s.data.cruise?s.data.cruise:[],r=c=>{if(!Array.isArray(t))return 0;const a=t.find(n=>n&&n.status===c);return a&&a.count||0};this.boardingStats={total:Array.isArray(t)?t.reduce((c,a)=>c+(a.count||0),0):0,pending:r("pending"),confirmed:r("approved")+r("completed"),cancelled:r("rejected")}}catch(s){console.error("Failed to load boarding stats:",s),this.boardingStats={total:0,pending:0,confirmed:0,cancelled:0}}},async refreshBoardingApplications(){await this.loadBoardingApplications(),await this.loadBoardingStats(),this.toast&&this.toast.success("ìŠ¹ì„  ì²´í—˜ ì‹ ì²­ì„œ ëª©ë¡ì´ ìƒˆë¡œê³ ì¹¨ë˜ì—ˆìŠµë‹ˆë‹¤.","ğŸ”„ ìƒˆë¡œê³ ì¹¨")},async applyBoardingFilters(){this.boardingCurrentPage=1,await this.loadBoardingApplications(),await this.loadBoardingStats()},async updateBoardingApplicationStatus(s,t){try{const r=this.mapBoardingStatusToCruiseStatus(t);await m.put(`${g}/api/applications/cruise/${s.id}/status`,{status:r}),s.status=t,this.toast&&this.toast.success(`ì‹ ì²­ ìƒíƒœê°€ ${this.getBoardingStatusLabel(t)}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`,"ğŸ“‹ ìƒíƒœ ë³€ê²½"),await this.loadBoardingStats()}catch(r){console.error("Failed to update boarding application status:",r),this.toast&&this.toast.error("ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},mapBoardingStatusToCruiseStatus(s){return{pending:"pending",confirmed:"approved",cancelled:"rejected"}[s]||s},async exportBoardingApplications(){try{const s=await m.get(`${g}/api/applications/cruise/export`,{params:this.boardingFilters,headers:{Authorization:`Bearer ${this.authStore.state.token}`}}),t=this.generateBoardingCSV(s.data),r="\uFEFF",c=new Blob([r+t],{type:"text/csv;charset=utf-8;"}),a=window.URL.createObjectURL(c),n=document.createElement("a");n.href=a,n.download=`ìŠ¹ì„ ì²´í—˜ì‹ ì²­ì„œ_${new Date().toISOString().split("T")[0]}.csv`,n.click(),window.URL.revokeObjectURL(a),this.toast.success("ìŠ¹ì„  ì²´í—˜ ì‹ ì²­ì„œ ëª©ë¡ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.","ğŸ“Š ë‹¤ìš´ë¡œë“œ ì™„ë£Œ")}catch(s){console.error("Failed to export boarding applications:",s),this.toast.error("ì—‘ì…€ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","ğŸ“„ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨")}},generateBoardingCSV(s){if(s.length===0)return"";const t=Object.keys(s[0]),r=s.map(c=>t.map(a=>c[a]!==void 0&&c[a]!==null?c[a]:""));return[t.join(","),...r.map(c=>c.map(a=>`"${String(a).replace(/"/g,'""')}"`).join(","))].join(`
`)},async viewBoardingApplication(s){const t=`
ì‹ ì²­ì: ${s.name}
ì—°ë½ì²˜: ${s.phone}
ì´ë©”ì¼: ${s.email}
ì²´í—˜ ìœ í˜•: ${this.getExperienceTypeLabel(s.experienceType)}
í¬ë§ ë‚ ì§œ: ${s.desiredDate}
ì°¸ê°€ ì¸ì›: ${s.participants}ëª…
ìƒíƒœ: ${this.getBoardingStatusLabel(s.status)}
ì‹ ì²­ì¼: ${this.formatDate(s.createdAt)}
ë©”ì‹œì§€: ${s.message||"ì—†ìŒ"}
      `;this.toast&&this.toast.info(t,"ğŸ‘ï¸ ìŠ¹ì„  ì²´í—˜ ì‹ ì²­ì„œ ìƒì„¸")},async deleteBoardingApplication(s){if(confirm("ì •ë§ë¡œ ì´ ì‹ ì²­ì„œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await m.delete(`${g}/api/applications/cruise/${s}`),this.boardingApplications=this.boardingApplications.filter(t=>t.id!==s),await this.loadBoardingStats(),this.toast&&this.toast.success("ìŠ¹ì„  ì²´í—˜ ì‹ ì²­ì„œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.","ğŸ—‘ï¸ ì‚­ì œ ì™„ë£Œ")}catch(t){console.error("Failed to delete boarding application:",t),this.toast&&this.toast.error("ì‹ ì²­ì„œ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},getExperienceTypeLabel(s){return{cruise:"í¬ë£¨ì¦ˆìš”íŠ¸",dinghy:"ë”©ê¸°ìš”íŠ¸",paddleboard:"íŒ¨ë“¤ë³´ë“œ"}[s]||s},getBoardingStatusLabel(s){return{pending:"ëŒ€ê¸°ì¤‘",confirmed:"ìŠ¹ì¸ë¨",cancelled:"ì·¨ì†Œë¨"}[s]||s},async logout(){confirm("ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(await this.authStore.logout(),this.$router.push("/"))},formatDate(s){return s?new Date(s).toLocaleString("ko-KR"):"-"},async loadSchedules(){try{const s=await m.get(`${g}/api/schedules`);this.schedules=s.data,this.updateSelectedDatesForCurrentMonth()}catch(s){console.error("Failed to load schedules:",s)}},async saveSchedules(){try{const s=`${this.currentDate.getFullYear()}-${String(this.currentDate.getMonth()+1).padStart(2,"0")}`,t=await m.post(`${g}/api/schedules`,{month:s,dates:this.selectedDates});this.schedules[s]=this.selectedDates,this.toast.celebrate("ì¼ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.","ğŸ“… ì¼ì • ì €ì¥ ì™„ë£Œ")}catch(s){console.error("Failed to save schedules:",s),this.toast.error("ì¼ì • ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},updateSelectedDatesForCurrentMonth(){const s=`${this.currentDate.getFullYear()}-${String(this.currentDate.getMonth()+1).padStart(2,"0")}`,t=this.schedules[s];t?(this.selectedDates=t.dates||t||[],this.isMonthClosed=t.isClosed||!1):(this.selectedDates=[],this.isMonthClosed=!1)},isDateClosed(s){return this.isMonthClosed},async toggleMonthClosure(){try{const s=`${this.currentDate.getFullYear()}-${String(this.currentDate.getMonth()+1).padStart(2,"0")}`,t=await m.post(`${g}/api/schedules/toggle-close`,{month:s},{headers:{Authorization:`Bearer ${this.authStore.state.token}`}});if(t.data.success){this.isMonthClosed=t.data.isClosed,this.schedules[s]?Array.isArray(this.schedules[s])?this.schedules[s]={dates:this.schedules[s],isClosed:this.isMonthClosed}:this.schedules[s].isClosed=this.isMonthClosed:this.schedules[s]={dates:this.selectedDates,isClosed:this.isMonthClosed};const r=t.data.action,c=r==="closed"?"ì›” ì „ì²´ê°€ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤.":"ì›” ë§ˆê°ì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.";this.toast.success(c,`ğŸ“… ${r==="closed"?"ì›” ë§ˆê°":"ì›” ì¬ì˜¤í”ˆ"} ì™„ë£Œ`)}}catch(s){console.error("Failed to toggle month closure:",s),this.toast.error("ì›” ë§ˆê° ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},toggleDay(s){if(s.disabled||!s.isCurrentMonth||s.isPast)return;const t=this.selectedDates.indexOf(s.date);t>-1?this.selectedDates.splice(t,1):this.selectedDates.length<5?(this.selectedDates.push(s.date),this.selectedDates.sort()):this.toast.warning("í•œ ë‹¬ì— ìµœëŒ€ 5ì¼ê¹Œì§€ë§Œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","ğŸ“… ì„ íƒ ì œí•œ")},removeDate(s){const t=this.selectedDates.indexOf(s);t>-1&&this.selectedDates.splice(t,1)},formatSelectedDate(s){return new Date(s).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})},previousMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1,1),this.updateSelectedDatesForCurrentMonth()},nextMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1,1),this.updateSelectedDatesForCurrentMonth()},async loadApplications(){try{const s=await m.get(`${g}/api/applications/exemption`,{params:this.applicationFilters});this.applications=s.data}catch(s){console.error("Failed to load applications:",s)}},async loadApplicationStats(){try{const s=await m.get(`${g}/api/applications/exemption/stats`);this.applicationStats=s.data}catch(s){console.error("Failed to load application stats:",s)}},async refreshApplications(){await this.loadApplications(),await this.loadApplicationStats()},async applyFilters(){await this.loadApplications()},async updateApplicationStatus(s,t){try{await m.patch(`${g}/api/applications/exemption/${s.id}/status`,{status:t}),s.status=t,this.toast.success(`ì‹ ì²­ ìƒíƒœê°€ ${this.getStatusLabel(t)}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`,"ğŸ“‹ ìƒíƒœ ë³€ê²½"),await this.loadApplicationStats()}catch(r){console.error("Failed to update application status:",r),this.toast.error("ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},async exportApplications(){try{const s=await m.get(`${g}/api/applications/exemption/export`,{params:this.applicationFilters,responseType:"blob"}),t=new Blob([s.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=window.URL.createObjectURL(t),c=document.createElement("a");c.href=r,c.download=`ë©´ì œêµìœ¡ì‹ ì²­ì_${new Date().toISOString().split("T")[0]}.xlsx`,c.click(),window.URL.revokeObjectURL(r)}catch(s){console.error("Failed to export applications:",s),this.toast.error("ì—‘ì…€ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","ğŸ“„ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨")}},parsePreferredDates(s){if(!s)return[];try{return JSON.parse(s)}catch{return s.split(",").map(t=>t.trim())}},formatLicense(s){return s?{general1:"ì¼ë°˜ì¡°ì¢… 1ê¸‰",general2:"ì¼ë°˜ì¡°ì¢… 2ê¸‰"}[s]||s:"-"},formatDiscount(s){return s?{tongyeong:"í†µì˜ì‹œë¯¼í• ì¸ 20%",partner:"í˜‘ë ¥ë‹¨ì²´ 20%",disabled:"ì¥ì• ì¸í• ì¸ 20%"}[s]||s:"-"},formatShortDate(s){return s?new Date(s).toLocaleDateString("ko-KR",{month:"short",day:"numeric"}):""},getStatusLabel(s){return{pending:"ëŒ€ê¸°ì¤‘",approved:"ìŠ¹ì¸",rejected:"ê±°ë¶€"}[s]||s},async loadNotices(){try{const s=await m.get(`${g}/api/notices`,{params:this.noticeFilters});this.notices=s.data||[]}catch(s){console.error("Failed to load notices:",s),this.notices=[]}},async refreshNotices(){await this.loadNotices(),this.toast.success("ê³µì§€ì‚¬í•­ ëª©ë¡ì´ ìƒˆë¡œê³ ì¹¨ë˜ì—ˆìŠµë‹ˆë‹¤.","ğŸ”„ ìƒˆë¡œê³ ì¹¨")},async applyNoticeFilters(){await this.loadNotices()},async editNotice(s){this.editingNotice=s,this.editForm={title:s.title,content:s.content,category_id:s.category_id,important:s.important===1||s.important===!0}},async saveNoticeEdit(){if(!this.editForm.title||!this.editForm.content){this.toast.warning("ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.","âš ï¸ ì…ë ¥ í™•ì¸");return}try{const s=await m.put(`${g}/api/notices/${this.editingNotice.id}`,{title:this.editForm.title,content:this.editForm.content,category_id:this.editForm.category_id,important:this.editForm.important},{headers:{Authorization:`Bearer ${this.authStore.state.token}`}});this.editingNotice=null,this.editForm={title:"",content:"",category_id:"",important:!1},await this.loadNotices(),this.toast.success("ê³µì§€ì‚¬í•­ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.","âœ… ìˆ˜ì • ì™„ë£Œ")}catch(s){console.error("Failed to update notice:",s),this.toast.error("ê³µì§€ì‚¬í•­ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","âŒ ìˆ˜ì • ì‹¤íŒ¨")}},cancelNoticeEdit(){this.editingNotice=null,this.editForm={title:"",content:"",category_id:"",important:!1}},async deleteNotice(s){if(confirm("ì •ë§ë¡œ ì´ ê³µì§€ì‚¬í•­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{const t=localStorage.getItem("token");await m.delete(`${g}/api/notices/${s}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),this.notices=this.notices.filter(r=>r.id!==s),this.toast.success("ê³µì§€ì‚¬í•­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.","ğŸ—‘ï¸ ì‚­ì œ ì™„ë£Œ")}catch(t){console.error("Failed to delete notice:",t),this.toast.error("ê³µì§€ì‚¬í•­ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},async toggleNoticeStatus(s){try{const t=!s.published,r=localStorage.getItem("token");await m.patch(`${g}/api/notices/${s.id}/status`,{published:t},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}}),s.published=t,this.toast.success(`ê³µì§€ì‚¬í•­ì´ ${t?"ê³µê°œ":"ë¹„ê³µê°œ"}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`,"ğŸ”„ ìƒíƒœ ë³€ê²½")}catch(t){console.error("Failed to toggle notice status:",t),this.toast.error("ê³µì§€ì‚¬í•­ ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},getCategoryLabel(s){return{exemption:"ë©´ì œêµìœ¡",cruise:"í¬ë£¨ì¦ˆìš”íŠ¸",dinghy:"ë”©ê¸°ìš”íŠ¸",recruitment:"ì±„ìš©",others:"ê¸°íƒ€"}[s]||s},async loadCommunityPosts(){try{const s=await m.get(`${g}/api/community`,{params:this.communityFilters});this.communityPosts=s.data||[]}catch(s){console.error("Failed to load community posts:",s),this.communityPosts=[]}},async refreshCommunity(){await this.loadCommunityPosts(),this.toast.success("ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€ ëª©ë¡ì´ ìƒˆë¡œê³ ì¹¨ë˜ì—ˆìŠµë‹ˆë‹¤.","ğŸ”„ ìƒˆë¡œê³ ì¹¨")},async applyCommunityFilters(){await this.loadCommunityPosts()},async viewCommunityPost(s){const t=`
ì œëª©: ${s.title}
ë‚´ìš©: ${s.content.substring(0,100)}...
ê²Œì‹œíŒ: ${this.getBoardLabel(s.board)}
ì‘ì„±ì: ${s.author}
ì‘ì„±ì¼: ${this.formatDate(s.date)}
ì¡°íšŒìˆ˜: ${s.views}
ëŒ“ê¸€ìˆ˜: ${s.comments}
      `;this.toast.info(t,"ğŸ‘ï¸ ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€ ìƒì„¸")},async deleteCommunityPost(s){if(confirm("ì •ë§ë¡œ ì´ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await m.delete(`${g}/api/community/${s}`),this.communityPosts=this.communityPosts.filter(t=>t.id!==s),this.toast.success("ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.","ğŸ—‘ï¸ ì‚­ì œ ì™„ë£Œ")}catch(t){console.error("Failed to delete community post:",t),this.toast.error("ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},getBoardLabel(s){return{free:"ììœ ê²Œì‹œíŒ",qna:"ì§ˆë¬¸ë‹µë³€",review:"í›„ê¸°ê²Œì‹œíŒ"}[s]||s},extractDurationFromSpecialRequests(s){if(!s)return"-";const t=s.match(/(ë‹¨ìˆœ ì²´í—˜|ì²´í—˜ í”ŒëŸ¬ìŠ¤|1ì‹œê°„|1ì‹œê°„ 30ë¶„|4ì‹œê°„|8ì‹œê°„)/i);return t?t[1]:"í¬ë£¨ì¦ˆ ì²´í—˜"},mapCruiseStatusToBoardingStatus(s){return{pending:"pending",approved:"confirmed",completed:"confirmed",rejected:"cancelled"}[s]||s},async loadEducationApplications(){try{const s=await m.get(`${g}/api/applications/education`,{params:this.educationFilters});this.educationApplications=(s.data||[]).map(t=>({id:t.id,name:t.name,phone:t.phone,email:t.email,birthDate:t.birthDate,gender:t.gender,address:t.address,license:t.license||"",courseType:t.courseType,preferredDates:t.preferredDates||[],discountEligibility:t.discountEligibility||"",experience:t.experience||"none",motivation:t.motivation||"",status:t.status||"pending",createdAt:t.created_at,user_id:t.user_id}))}catch(s){console.error("Failed to load education applications:",s),this.educationApplications=[]}},async loadEducationStats(){try{const s=await m.get(`${g}/api/applications/education/stats`);this.educationStats=s.data}catch(s){console.error("Failed to load education stats:",s),this.educationStats={total:0,pending:0,confirmed:0,thisMonth:0}}},async refreshEducationApplications(){await this.loadEducationApplications(),await this.loadEducationStats(),this.toast&&this.toast.success("ìš”íŠ¸êµìœ¡ ì‹ ì²­ì ëª©ë¡ì´ ìƒˆë¡œê³ ì¹¨ë˜ì—ˆìŠµë‹ˆë‹¤.","ğŸ”„ ìƒˆë¡œê³ ì¹¨")},async applyEducationFilters(){await this.loadEducationApplications(),await this.loadEducationStats()},async updateEducationApplicationStatus(s,t){try{await m.patch(`${g}/api/applications/education/${s.id}/status`,{status:t}),s.status=t,this.toast.success(`ì‹ ì²­ ìƒíƒœê°€ ${this.getStatusLabel(t)}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`,"ğŸ“‹ ìƒíƒœ ë³€ê²½"),await this.loadEducationStats()}catch(r){console.error("Failed to update education application status:",r),this.toast.error("ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},async exportEducationApplications(){try{const s=this.generateEducationCSV(),t=new Blob([s],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(t),c=document.createElement("a");c.href=r,c.download=`ìš”íŠ¸êµìœ¡ì‹ ì²­ì_${new Date().toISOString().split("T")[0]}.csv`,c.click(),window.URL.revokeObjectURL(r),this.toast.success("ìš”íŠ¸êµìœ¡ ì‹ ì²­ì ëª©ë¡ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.","ğŸ“Š ë‹¤ìš´ë¡œë“œ ì™„ë£Œ")}catch(s){console.error("Failed to export education applications:",s),this.toast.error("ì—‘ì…€ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","ğŸ“„ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨")}},generateEducationCSV(){const s=["ID","ì´ë¦„","ì—°ë½ì²˜","ì´ë©”ì¼","ìƒë…„ì›”ì¼","ì„±ë³„","ì†Œì¬ì§€","êµìœ¡ê³¼ì •","ìƒíƒœ","ì‹ ì²­ì¼"],t=this.educationApplications.map(r=>[r.id,r.name,r.phone,r.email||"ë¯¸ì…ë ¥",r.birthDate,this.formatGender(r.gender),r.address,r.courseType,this.getStatusLabel(r.status),this.formatDate(r.createdAt)]);return[s.join(","),...t.map(r=>r.map(c=>`"${c}"`).join(","))].join(`
`)},async viewEducationApplication(s){const t=`
ì‹ ì²­ì: ${s.name}
ì—°ë½ì²˜: ${s.phone}
ì´ë©”ì¼: ${s.email||"ë¯¸ì…ë ¥"}
ìƒë…„ì›”ì¼: ${s.birthDate}
ì„±ë³„: ${this.formatGender(s.gender)}
ì†Œì¬ì§€: ${s.address}
êµìœ¡ê³¼ì •: ${s.courseType}
ìƒíƒœ: ${this.getStatusLabel(s.status)}
ì‹ ì²­ì¼: ${this.formatDate(s.createdAt)}
      `;this.toast&&this.toast.info(t,"ğŸ‘ï¸ ìš”íŠ¸êµìœ¡ ì‹ ì²­ì„œ ìƒì„¸")},async deleteEducationApplication(s){if(confirm("ì •ë§ë¡œ ì´ ì‹ ì²­ì„œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await m.delete(`${g}/api/applications/education/${s}`),this.educationApplications=this.educationApplications.filter(t=>t.id!==s),await this.loadEducationStats(),this.toast&&this.toast.success("ìš”íŠ¸êµìœ¡ ì‹ ì²­ì„œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.","ğŸ—‘ï¸ ì‚­ì œ ì™„ë£Œ")}catch(t){console.error("Failed to delete education application:",t),this.toast&&this.toast.error("ì‹ ì²­ì„œ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},formatGender(s){return{male:"ë‚¨ì„±",female:"ì—¬ì„±"}[s]||s||"-"},getCourseTypeClass(s){return s?.includes("í¬ë£¨ì¦ˆ")||s?.includes("ì„¬ê°„í•­í•´")?"cruise":s?.includes("ë”©ê¸°")||s?.includes("í† íŒŒì¦ˆ")||s?.includes("í˜¸ë¹„")?"dinghy":"other"},async loadCommunityPosts(){try{const s=await m.get(`${g}/api/notices?category=free_board`);this.communityPosts=(s.data||[]).map(t=>({id:t.id,title:t.title,content:t.content,description:t.content.substring(0,100)+"...",author:t.author_name||"ìµëª…",date:t.created_at?.split("T")[0]||new Date().toISOString().split("T")[0],views:t.views||0,category:"free_board",type:"post"}))}catch(s){console.error("Failed to load community posts:",s),this.communityPosts=[]}},async loadCommunityPhotos(){try{const s=await m.get(`${g}/api/photos`);this.communityPhotos=(s.data||[]).map(t=>({id:t.id,title:t.title,filename:`ê°¤ëŸ¬ë¦¬ (${t.photo_count||0}ì¥)`,description:t.description,author:t.author_name||"ê´€ë¦¬ì",date:t.created_at?.split("T")[0]||new Date().toISOString().split("T")[0],views:0,category:t.category_id,photo_count:t.photo_count||0,url:t.url,type:"photo"}))}catch(s){console.error("Failed to load photos:",s),this.communityPhotos=[]}},async loadCommunityVideos(){try{const s=await m.get(`${g}/api/videos`);this.communityVideos=(s.data||[]).map(t=>({id:t.id,title:t.title,filename:t.original_name,description:t.description,author:t.author_name||"ê´€ë¦¬ì",date:t.created_at?.split("T")[0]||new Date().toISOString().split("T")[0],views:t.views||0,category:t.category_id,file_path:t.file_path,duration:t.duration,url:t.thumbnail_url||t.url,video_url:t.url,type:"video"}))}catch(s){console.error("Failed to load videos:",s),this.communityVideos=[]}},async loadCommunityReviews(){try{const s=await m.get(`${g}/api/reviews`);this.communityReviews=(s.data||[]).map(t=>({id:t.id,title:t.title,content:t.content,description:t.content.substring(0,100)+"...",author:t.author_name||"ìµëª…",date:t.created_at?.split("T")[0]||new Date().toISOString().split("T")[0],views:t.views||0,category:t.category_id,rating:t.rating,type:"review"}))}catch(s){console.error("Failed to load reviews:",s),this.communityReviews=[]}},async loadCommunityCrews(){try{const s=await m.get(`${g}/api/crews`);this.communityCrews=(s.data||[]).map(t=>({id:t.id,title:t.title,content:t.content,description:t.content.substring(0,100)+"...",author:t.author_name||"ìµëª…",date:t.created_at?.split("T")[0]||new Date().toISOString().split("T")[0],views:t.views||0,category:"crew",departure_location:t.departure_location,departure_date:t.departure_date,status:t.status,current_crew:t.current_crew,max_crew:t.max_crew,type:"crew"}))}catch(s){console.error("Failed to load crew recruitments:",s),this.communityCrews=[]}},async refreshCommunity(){await Promise.all([this.loadCommunityPosts(),this.loadCommunityPhotos(),this.loadCommunityVideos(),this.loadCommunityReviews(),this.loadCommunityCrews()]),this.toast.success("ì»¤ë®¤ë‹ˆí‹° ë°ì´í„°ê°€ ìƒˆë¡œê³ ì¹¨ë˜ì—ˆìŠµë‹ˆë‹¤.","ğŸ”„ ìƒˆë¡œê³ ì¹¨")},applyCommunityFilters(){this.toast.info("í•„í„°ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.")},getContentTypeLabel(s){return{post:"ê²Œì‹œê¸€",photo:"ì‚¬ì§„",video:"ë™ì˜ìƒ",review:"í›„ê¸°",crew:"í¬ë£¨ëª¨ì§‘"}[s]||s},getCategoryLabel(s){return{free:"ììœ ê²Œì‹œíŒ",qna:"ì§ˆë¬¸ë‹µë³€",review:"í›„ê¸°ê²Œì‹œíŒ",crew:"í¬ë£¨ëª¨ì§‘ê²Œì‹œíŒ",gallery:"ê°¤ëŸ¬ë¦¬",notice:"ê³µì§€ì‚¬í•­",exemption:"ë©´ì œêµìœ¡",cruise:"í¬ë£¨ì¦ˆìš”íŠ¸",dinghy:"ë”©ê¸°ìš”íŠ¸"}[s]||s},getPreviewUrl(s){if(s.type==="photo"&&s.url)return s.url.startsWith("/")?`${g}${s.url}`:s.url;if(s.type==="video"){const t=s.url||s.file_path;return t&&t.startsWith("/")?`${g}${t}`:t}return s.url?s.url.startsWith("/")?`${g}${s.url}`:s.url:s.file_path?s.file_path.startsWith("/")?`${g}${s.file_path}`:s.file_path:"/default-preview.jpg"},viewCommunityItem(s){const t=this.getContentTypeLabel(s.type),r=`
íƒ€ì…: ${t}
ì œëª©: ${s.title||s.filename}
ì‘ì„±ì: ${s.author}
ì‘ì„±ì¼: ${this.formatDate(s.date)}
ì¹´í…Œê³ ë¦¬: ${this.getCategoryLabel(s.category)}
ì¡°íšŒìˆ˜: ${s.views||0}
${s.description?`ì„¤ëª…: ${s.description}`:""}
${s.content?`ë‚´ìš©: ${s.content.substring(0,100)}...`:""}
      `;this.toast.info(r,`ğŸ‘ï¸ ${t} ìƒì„¸ë³´ê¸°`)},async editCommunityItem(s){const t=this.getContentTypeLabel(s.type);try{let r="";switch(s.type){case"post":r="/community/free-board";break;case"photo":r="/community/photo-gallery";break;case"video":r="/community/video-gallery";break;case"review":r="/community/review-board";break;case"crew":r="/community/crew-recruitment";break;default:this.toast.error("ì§€ì›í•˜ì§€ ì•ŠëŠ” ì½˜í…ì¸  íƒ€ì…ì…ë‹ˆë‹¤.","âŒ ì˜¤ë¥˜");return}const c=`${r}?edit=${s.id}`;window.open(c,"_blank"),this.toast.info(`${t} ìˆ˜ì • í˜ì´ì§€ë¥¼ ìƒˆ ì°½ì—ì„œ ì—´ì—ˆìŠµë‹ˆë‹¤.`,"ğŸ”§ ìˆ˜ì •")}catch(r){console.error("Failed to open edit page:",r),this.toast.error("ìˆ˜ì • í˜ì´ì§€ë¥¼ ì—¬ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","âŒ ì˜¤ë¥˜")}},async deleteCommunityItem(s){const t=this.getContentTypeLabel(s.type);let r=`ì •ë§ë¡œ ì´ ${t}ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?

ì œëª©: ${s.title||s.filename}`;if(s.type==="photo"&&s.photo_count&&(r+=`

âš ï¸ ê°¤ëŸ¬ë¦¬ ë‚´ ${s.photo_count}ì¥ì˜ ì‚¬ì§„ì´ ëª¨ë‘ ì‚­ì œë©ë‹ˆë‹¤.`),!!confirm(r))try{let c="";switch(s.type){case"post":c=`/api/community/posts/${s.id}`;break;case"photo":c=`/api/photos/${s.id}`;break;case"video":c=`/api/videos/${s.id}`;break;case"review":c=`/api/reviews/${s.id}`;break;case"crew":c=`/api/crews/${s.id}`;break;default:throw new Error("ì•Œ ìˆ˜ ì—†ëŠ” ì»¨í…ì¸  íƒ€ì…")}const a=localStorage.getItem("token"),n=await m.delete(`${g}${c}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});switch(s.type){case"post":this.communityPosts=this.communityPosts.filter(o=>o.id!==s.id);break;case"photo":this.communityPhotos=this.communityPhotos.filter(o=>o.id!==s.id);break;case"video":this.communityVideos=this.communityVideos.filter(o=>o.id!==s.id);break;case"review":this.communityReviews=this.communityReviews.filter(o=>o.id!==s.id);break;case"crew":this.communityCrews=this.communityCrews.filter(o=>o.id!==s.id);break}s.type==="photo"&&n.data?.deletedPhotos?this.toast.success(`ê°¤ëŸ¬ë¦¬ì™€ ${n.data.deletedPhotos}ì¥ì˜ ì‚¬ì§„ì´ ëª¨ë‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`,"ğŸ—‘ï¸ ê°¤ëŸ¬ë¦¬ ì‚­ì œ ì™„ë£Œ"):this.toast.success(`${t}ì´(ê°€) ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`,"ğŸ—‘ï¸ ì‚­ì œ ì™„ë£Œ")}catch(c){console.error("Failed to delete community item:",c);const a=c.response?.data?.error||`${t} ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.`;this.toast.error(a,"âŒ ì‚­ì œ ì˜¤ë¥˜")}}},watch:{activeTab(s){s==="logs"&&this.loginLogs.length===0&&this.loadLoginLogs(),s==="boarding"&&this.boardingApplications.length===0&&(this.loadBoardingApplications(),this.loadBoardingStats()),s==="notices"&&this.notices.length===0&&this.loadNotices(),s==="community"&&this.communityPosts.length===0&&this.refreshCommunity(),s==="education"&&this.educationApplications.length===0&&(this.loadEducationApplications(),this.loadEducationStats())},handleExcelSuccess(s){this.toast.success(s)},handleExcelError(s){this.toast.error(s)}}},bt={key:0,class:"admin-container"},vt={class:"admin-header"},ft={class:"admin-nav"},kt={key:0,class:"admin-content"},Ct={class:"stats-cards"},St={class:"stat-card"},wt={class:"stat-number"},Dt={class:"stat-card"},_t={class:"stat-number"},Ft={class:"stat-card"},Tt={class:"stat-number"},At={class:"stat-card"},xt={class:"stat-number"},Mt={class:"content-header"},Et={class:"users-table"},Ut=["onClick","disabled"],Lt={key:1,class:"admin-content"},Vt={class:"content-header"},Bt={class:"logs-display"},Pt={key:0,class:"no-logs"},It={key:1,class:"logs-content"},Rt={key:2,class:"admin-content"},Nt={class:"content-header"},Ot={class:"schedule-section"},jt={class:"calendar-container"},zt={class:"month-navigation"},Ht={class:"calendar"},qt={class:"calendar-body"},Yt=["onClick"],Wt={class:"selected-dates"},Gt={class:"date-tags"},Jt=["onClick"],Kt={key:0,class:"closed-indicator"},Qt={key:0,class:"month-closure-control"},Xt=["title"],Zt={class:"closure-info"},$t={key:3,class:"admin-content"},te={class:"content-header"},ee={class:"header-actions"},se={class:"applications-filters"},ie={class:"filter-group"},ae={class:"filter-group"},ne={class:"filter-group"},le={class:"applications-stats"},oe={class:"stat-card"},re={class:"stat-number"},de={class:"stat-card"},ue={class:"stat-number"},ce={class:"stat-card"},he={class:"stat-number"},pe={class:"stat-card"},ge={class:"stat-number"},me={class:"applications-table"},ye={class:"name-cell"},be={key:0,class:"guest-badge"},ve={class:"address-cell"},fe={class:"course-cell"},ke={class:"dates-cell"},Ce={class:"actions-cell"},Se=["onChange","value"],we={key:0,class:"no-applications"},De={key:4,class:"admin-content"},_e={class:"stats-cards"},Fe={class:"stat-card"},Te={class:"stat-number"},Ae={class:"stat-card"},xe={class:"stat-number"},Me={class:"stat-card"},Ee={class:"stat-number"},Ue={class:"stat-card"},Le={class:"stat-number"},Ve={class:"content-header"},Be={class:"header-actions"},Pe={class:"applications-filters"},Ie={class:"filter-group"},Re={class:"filter-group"},Ne={class:"filter-group"},Oe={class:"applications-table-container"},je={class:"applications-table"},ze=["onUpdate:modelValue","onChange"],He={class:"actions"},qe=["onClick"],Ye=["onClick"],We={key:5,class:"admin-content"},Ge={class:"stats-cards"},Je={class:"stat-card"},Ke={class:"stat-number"},Qe={class:"stat-card"},Xe={class:"stat-number"},Ze={class:"stat-card"},$e={class:"stat-number"},ts={class:"stat-card"},es={class:"stat-number"},ss={class:"content-header"},is={class:"header-actions"},as={class:"applications-filters"},ns={class:"filter-group"},ls={class:"filter-group"},os={class:"filter-group"},rs={class:"applications-table-container"},ds={class:"applications-table"},us={class:"name-cell"},cs={key:0,class:"guest-badge"},hs={class:"address-cell"},ps={class:"course-cell"},gs={class:"actions-cell"},ms=["onChange","value"],ys=["onClick"],bs=["onClick"],vs={key:0,class:"no-applications"},fs={key:6,class:"admin-content"},ks={class:"content-header"},Cs={class:"header-actions"},Ss={class:"notices-filters"},ws={class:"filter-group"},Ds={class:"filter-group"},_s={class:"notices-table-container"},Fs={class:"notices-table"},Ts={class:"title-cell"},As={class:"notice-title"},xs={key:0,class:"important-badge"},Ms={class:"actions"},Es=["onClick"],Us=["onClick"],Ls=["onClick"],Vs={key:0,class:"edit-notice-form"},Bs={class:"form-header"},Ps={class:"form-body"},Is={class:"form-group"},Rs={class:"form-group"},Ns={class:"form-group"},Os={class:"form-group"},js={class:"checkbox-label"},zs={class:"form-actions"},Hs={key:7,class:"admin-content"},qs={class:"content-header"},Ys={class:"header-actions"},Ws={class:"community-filters"},Gs={class:"filter-group"},Js={class:"filter-group"},Ks={class:"filter-group"},Qs={class:"community-table-container"},Xs={class:"community-table"},Zs={class:"title-cell"},$s={class:"item-title"},ti={key:0,class:"item-description"},ei={class:"preview-cell"},si={key:0,class:"photo-preview"},ii=["src","alt"],ai={key:1,class:"video-preview"},ni=["src"],li={class:"video-duration"},oi={key:2,class:"text-preview"},ri={class:"actions"},di=["onClick"],ui=["onClick"],ci=["onClick"],hi={key:0,class:"no-content"},pi={key:8,class:"admin-content"},gi={key:0,class:"error-message"},mi={key:9,class:"admin-content"},yi={class:"content-header"},bi={class:"header-actions"},vi=["disabled"],fi={class:"settings-nav"},ki=["onClick"],Ci={key:0,class:"settings-section"},Si={class:"setting-group"},wi={class:"setting-item"},Di={class:"setting-item"},_i={class:"setting-item"},Fi={class:"setting-item"},Ti={class:"setting-item"},Ai={class:"setting-item"},xi={key:1,class:"settings-section"},Mi={class:"setting-group"},Ei={class:"setting-item"},Ui={class:"toggle-label"},Li={class:"setting-item"},Vi={class:"toggle-label"},Bi={class:"setting-item"},Pi={key:2,class:"settings-section"},Ii={class:"setting-group"},Ri={class:"setting-item"},Ni={class:"db-status"},Oi={class:"setting-item"},ji={class:"backup-controls"},zi=["disabled"],Hi={class:"setting-item"},qi={class:"cache-controls"},Yi={class:"setting-item"},Wi={class:"system-info"},Gi={class:"info-grid"},Ji={class:"info-item"},Ki={class:"info-value"},Qi={class:"info-item"},Xi={class:"info-value"},Zi={key:3,class:"settings-section"},$i={class:"setting-group"},ta={class:"setting-item"},ea={class:"setting-item"},sa={class:"setting-item"},ia={class:"toggle-label"},aa={key:4,class:"settings-section"},na={class:"setting-group"},la={class:"setting-item"},oa={class:"color-picker-group"},ra={class:"color-value"},da={class:"setting-item"},ua={class:"logo-upload"},ca={key:0,class:"logo-preview"},ha=["src"],pa={class:"setting-item"},ga={class:"toggle-label"},ma={key:5,class:"settings-section"},ya={class:"setting-group"},ba={class:"admin-info-card"},va={class:"admin-details"},fa={class:"setting-item"},ka={key:1,class:"access-denied"},Ca={class:"access-denied-content"};function Sa(s,t,r,c,a,n){const o=M("ExcelManager");return n.isAdmin?(d(),u("div",bt,[e("div",vt,[t[92]||(t[92]=e("h1",null,"ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ",-1)),e("div",ft,[n.isSuperAdmin?(d(),u("button",{key:0,onClick:t[0]||(t[0]=i=>a.activeTab="users"),class:y({active:a.activeTab==="users"})}," ì‚¬ìš©ì ê´€ë¦¬ ",2)):b("",!0),e("button",{onClick:t[1]||(t[1]=i=>a.activeTab="logs"),class:y({active:a.activeTab==="logs"})}," ë¡œê·¸ì¸ ê¸°ë¡ ",2),e("button",{onClick:t[2]||(t[2]=i=>a.activeTab="schedules"),class:y({active:a.activeTab==="schedules"})}," ë©´ì œêµìœ¡ ì¼ì • ",2),e("button",{onClick:t[3]||(t[3]=i=>a.activeTab="applications"),class:y({active:a.activeTab==="applications"})}," ë©´ì œêµìœ¡ ì‹ ì²­ì ",2),e("button",{onClick:t[4]||(t[4]=i=>a.activeTab="boarding"),class:y({active:a.activeTab==="boarding"})}," ìŠ¹ì„  ì²´í—˜ ì‹ ì²­ì„œ ",2),e("button",{onClick:t[5]||(t[5]=i=>a.activeTab="education"),class:y({active:a.activeTab==="education"})}," ìš”íŠ¸êµìœ¡ ì‹ ì²­ì ",2),e("button",{onClick:t[6]||(t[6]=i=>a.activeTab="notices"),class:y({active:a.activeTab==="notices"})}," ê³µì§€ì‚¬í•­ ê´€ë¦¬ ",2),e("button",{onClick:t[7]||(t[7]=i=>a.activeTab="community"),class:y({active:a.activeTab==="community"})}," ì»¤ë®¤ë‹ˆí‹° ê´€ë¦¬ ",2),e("button",{onClick:t[8]||(t[8]=i=>a.activeTab="excel"),class:y({active:a.activeTab==="excel"})}," ì—‘ì…€ ê´€ë¦¬ ",2),n.isSuperAdmin?(d(),u("button",{key:1,onClick:t[9]||(t[9]=i=>a.activeTab="settings"),class:y({active:a.activeTab==="settings"})}," ì„¤ì • ",2)):b("",!0),e("button",{onClick:t[10]||(t[10]=(...i)=>n.logout&&n.logout(...i)),class:"logout-btn"}," ë¡œê·¸ì•„ì›ƒ ")])]),a.activeTab==="users"?(d(),u("div",kt,[e("div",Ct,[e("div",St,[e("div",wt,l(a.stats.totalUsers||0),1),t[93]||(t[93]=e("div",{class:"stat-label"},"ì´ ì‚¬ìš©ì",-1))]),e("div",Dt,[e("div",_t,l(a.stats.activeUsers||0),1),t[94]||(t[94]=e("div",{class:"stat-label"},"í™œì„± ì‚¬ìš©ì",-1))]),e("div",Ft,[e("div",Tt,l(a.stats.recentLogins||0),1),t[95]||(t[95]=e("div",{class:"stat-label"},"ìµœê·¼ 7ì¼ ë¡œê·¸ì¸",-1))]),e("div",At,[e("div",xt,l(a.stats.inactiveUsers||0),1),t[96]||(t[96]=e("div",{class:"stat-label"},"ë¹„í™œì„± ì‚¬ìš©ì",-1))])]),e("div",Mt,[t[97]||(t[97]=e("h2",null,"ë“±ë¡ëœ ì‚¬ìš©ì ëª©ë¡",-1)),e("button",{onClick:t[11]||(t[11]=(...i)=>n.refreshUsers&&n.refreshUsers(...i)),class:"refresh-btn"},"ìƒˆë¡œê³ ì¹¨")]),e("div",Et,[e("table",null,[t[98]||(t[98]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"ì‚¬ìš©ìëª…"),e("th",null,"ì´ë©”ì¼"),e("th",null,"ì´ë¦„"),e("th",null,"ì „í™”ë²ˆí˜¸"),e("th",null,"ì—­í• "),e("th",null,"ìƒíƒœ"),e("th",null,"ê°€ì…ì¼"),e("th",null,"ë§ˆì§€ë§‰ ë¡œê·¸ì¸"),e("th",null,"ê´€ë¦¬")])],-1)),e("tbody",null,[(d(!0),u(f,null,k(a.users,i=>(d(),u("tr",{key:i.id},[e("td",null,l(i.id),1),e("td",null,l(i.username),1),e("td",null,l(i.email),1),e("td",null,l(i.full_name),1),e("td",null,l(i.phone||"-"),1),e("td",null,[e("span",{class:y(["role-badge",i.role])},l(i.role==="super_admin"?"ìµœê³ ê´€ë¦¬ì":i.role==="admin"?"ê´€ë¦¬ì":"ì¼ë°˜ì‚¬ìš©ì"),3)]),e("td",null,[e("span",{class:y(["status-badge",i.is_active?"active":"inactive"])},l(i.is_active?"í™œì„±":"ë¹„í™œì„±"),3)]),e("td",null,l(n.formatDate(i.created_at)),1),e("td",null,l(i.last_login?n.formatDate(i.last_login):"-"),1),e("td",null,[e("button",{onClick:h=>n.toggleUserStatus(i),class:y(["action-btn",i.is_active?"deactivate":"activate"]),disabled:i.role==="admin"||i.role==="super_admin"},l(i.is_active?"ë¹„í™œì„±í™”":"í™œì„±í™”"),11,Ut)])]))),128))])])])])):b("",!0),a.activeTab==="logs"?(d(),u("div",Lt,[e("div",Vt,[t[99]||(t[99]=e("h2",null,"ë¡œê·¸ì¸ ê¸°ë¡",-1)),e("button",{onClick:t[12]||(t[12]=(...i)=>n.refreshLogs&&n.refreshLogs(...i)),class:"refresh-btn"},"ìƒˆë¡œê³ ì¹¨")]),e("div",Bt,[a.loginLogs.length===0?(d(),u("div",Pt," ë¡œê·¸ì¸ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤. ")):(d(),u("div",It,[(d(!0),u(f,null,k(a.loginLogs,(i,h)=>(d(),u("div",{key:h,class:y(["log-entry",i.includes("FAILED")?"failed":"success"])},l(i),3))),128))]))])])):b("",!0),a.activeTab==="schedules"?(d(),u("div",Rt,[e("div",Nt,[t[100]||(t[100]=e("h2",null,"ë©´ì œêµìœ¡ ì¼ì • ê´€ë¦¬",-1)),e("button",{onClick:t[13]||(t[13]=(...i)=>n.saveSchedules&&n.saveSchedules(...i)),class:"save-btn"},"ì €ì¥")]),e("div",Ot,[t[103]||(t[103]=e("div",{class:"schedule-info"},[e("p",null,"ê° ì›”ë³„ë¡œ ë©´ì œêµìœ¡ì´ ê°€ëŠ¥í•œ ë‚ ì§œë¥¼ ìµœëŒ€ 5ì¼ê¹Œì§€ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."),e("p",null,"ì„ íƒëœ ë‚ ì§œëŠ” ì‚¬ìš©ìë“¤ì´ ë©´ì œêµìœ¡ ì‹ ì²­ ì‹œ ì„ íƒí•  ìˆ˜ ìˆëŠ” ë‚ ì§œë¡œ í‘œì‹œë©ë‹ˆë‹¤.")],-1)),e("div",jt,[e("div",zt,[e("button",{onClick:t[14]||(t[14]=(...i)=>n.previousMonth&&n.previousMonth(...i)),class:"nav-btn"},"<"),e("h3",null,l(n.currentMonthYear),1),e("button",{onClick:t[15]||(t[15]=(...i)=>n.nextMonth&&n.nextMonth(...i)),class:"nav-btn"},">")]),e("div",Ht,[t[101]||(t[101]=D('<div class="calendar-header" data-v-7b6fb55d><div class="day-header" data-v-7b6fb55d>ì¼</div><div class="day-header" data-v-7b6fb55d>ì›”</div><div class="day-header" data-v-7b6fb55d>í™”</div><div class="day-header" data-v-7b6fb55d>ìˆ˜</div><div class="day-header" data-v-7b6fb55d>ëª©</div><div class="day-header" data-v-7b6fb55d>ê¸ˆ</div><div class="day-header" data-v-7b6fb55d>í† </div></div>',1)),e("div",qt,[(d(!0),u(f,null,k(n.calendarDays,i=>(d(),u("div",{key:i.date,class:y(["calendar-day",{"other-month":!i.isCurrentMonth,selected:i.isSelected,disabled:!i.isCurrentMonth||i.isPast}]),onClick:h=>n.toggleDay(i)},l(i.day),11,Yt))),128))])]),e("div",Wt,[e("h4",null,"ì„ íƒëœ ë‚ ì§œ ("+l(a.selectedDates.length)+"/5)",1),e("div",Gt,[(d(!0),u(f,null,k(a.selectedDates,i=>(d(),u("div",{key:i,class:"date-tag-container"},[e("span",{class:y(["date-tag",{closed:a.isMonthClosed}]),onClick:h=>n.removeDate(i)},[C(l(n.formatSelectedDate(i))+" ",1),a.isMonthClosed?(d(),u("span",Kt,"(ë§ˆê°)")):b("",!0),t[102]||(t[102]=e("span",{class:"remove-btn"},"Ã—",-1))],10,Jt)]))),128))]),a.selectedDates.length>0?(d(),u("div",Qt,[e("button",{onClick:t[16]||(t[16]=(...i)=>n.toggleMonthClosure&&n.toggleMonthClosure(...i)),class:y(["month-closure-btn",{closed:a.isMonthClosed}]),title:a.isMonthClosed?"ì›” ì „ì²´ ë§ˆê° í•´ì œ":"ì›” ì „ì²´ ë§ˆê° ì²˜ë¦¬"},l(a.isMonthClosed?"ğŸ“… ì›” ì „ì²´ ì¬ì˜¤í”ˆ":"ğŸš« ì›” ì „ì²´ ë§ˆê°"),11,Xt),e("p",Zt,l(a.isMonthClosed?"í˜„ì¬ ì´ ì›”ì˜ ëª¨ë“  ë‚ ì§œê°€ ë§ˆê°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.":"ì›” ì „ì²´ë¥¼ í•œ ë²ˆì— ë§ˆê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."),1)])):b("",!0)])])])])):b("",!0),a.activeTab==="applications"?(d(),u("div",$t,[e("div",te,[t[104]||(t[104]=e("h2",null,"ë©´ì œêµìœ¡ ì‹ ì²­ì ê´€ë¦¬",-1)),e("div",ee,[e("button",{onClick:t[17]||(t[17]=(...i)=>n.exportApplications&&n.exportApplications(...i)),class:"export-btn"},"ì—‘ì…€ ë‹¤ìš´ë¡œë“œ"),e("button",{onClick:t[18]||(t[18]=(...i)=>n.refreshApplications&&n.refreshApplications(...i)),class:"refresh-btn"},"ìƒˆë¡œê³ ì¹¨")])]),e("div",se,[e("div",ie,[t[105]||(t[105]=e("label",null,"ì‹ ì²­ì¼ì:",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[19]||(t[19]=i=>a.applicationFilters.startDate=i)},null,512),[[v,a.applicationFilters.startDate]]),t[106]||(t[106]=e("span",null,"~",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[20]||(t[20]=i=>a.applicationFilters.endDate=i)},null,512),[[v,a.applicationFilters.endDate]])]),e("div",ae,[t[108]||(t[108]=e("label",null,"êµìœ¡ê³¼ì •:",-1)),p(e("select",{"onUpdate:modelValue":t[21]||(t[21]=i=>a.applicationFilters.courseType=i)},t[107]||(t[107]=[e("option",{value:""},"ì „ì²´",-1),e("option",{value:"general"},"ë©´ì œêµìœ¡",-1),e("option",{value:"practical"},"ì‹¤ê¸° ì—°ìˆ˜",-1)]),512),[[S,a.applicationFilters.courseType]])]),e("div",ne,[t[110]||(t[110]=e("label",null,"ìƒíƒœ:",-1)),p(e("select",{"onUpdate:modelValue":t[22]||(t[22]=i=>a.applicationFilters.status=i)},t[109]||(t[109]=[e("option",{value:""},"ì „ì²´",-1),e("option",{value:"pending"},"ëŒ€ê¸°ì¤‘",-1),e("option",{value:"approved"},"ìŠ¹ì¸",-1),e("option",{value:"rejected"},"ê±°ë¶€",-1)]),512),[[S,a.applicationFilters.status]])]),e("button",{onClick:t[23]||(t[23]=(...i)=>n.applyFilters&&n.applyFilters(...i)),class:"filter-btn"},"í•„í„° ì ìš©")]),e("div",le,[e("div",oe,[e("div",re,l(a.applicationStats.total||0),1),t[111]||(t[111]=e("div",{class:"stat-label"},"ì´ ì‹ ì²­ì",-1))]),e("div",de,[e("div",ue,l(a.applicationStats.pending||0),1),t[112]||(t[112]=e("div",{class:"stat-label"},"ìŠ¹ì¸ ëŒ€ê¸°",-1))]),e("div",ce,[e("div",he,l(a.applicationStats.approved||0),1),t[113]||(t[113]=e("div",{class:"stat-label"},"ìŠ¹ì¸ ì™„ë£Œ",-1))]),e("div",pe,[e("div",ge,l(a.applicationStats.thisMonth||0),1),t[114]||(t[114]=e("div",{class:"stat-label"},"ì´ë²ˆë‹¬ ì‹ ì²­",-1))])]),e("div",me,[e("table",null,[t[116]||(t[116]=e("thead",null,[e("tr",null,[e("th",null,"ì‹ ì²­ì¼"),e("th",null,"ì´ë¦„"),e("th",null,"ì—°ë½ì²˜"),e("th",null,"ì´ë©”ì¼"),e("th",null,"ìƒë…„ì›”ì¼"),e("th",null,"ì£¼ì†Œ"),e("th",null,"ìê²©ì¦"),e("th",null,"êµìœ¡ê³¼ì •"),e("th",null,"í¬ë§ì¼ì"),e("th",null,"í• ì¸í˜œíƒ"),e("th",null,"ìƒíƒœ"),e("th",null,"ê´€ë¦¬")])],-1)),e("tbody",null,[(d(!0),u(f,null,k(a.applications,i=>(d(),u("tr",{key:i.id,class:y(["app-row",i.status])},[e("td",null,l(n.formatDate(i.created_at)),1),e("td",ye,[e("strong",null,l(i.name),1),i.user_id?b("",!0):(d(),u("span",be,"ë¹„íšŒì›"))]),e("td",null,l(i.phone),1),e("td",null,l(i.email),1),e("td",null,l(n.formatDate(i.birth_date)),1),e("td",ve,l(i.address),1),e("td",null,l(n.formatLicense(i.boat_license_number)),1),e("td",fe,[e("span",{class:y(["course-badge",i.education_type])},l(i.education_type==="general"?"ë©´ì œêµìœ¡":"ì‹¤ê¸°ì—°ìˆ˜"),3)]),e("td",ke,[(d(!0),u(f,null,k(n.parsePreferredDates(i.preferred_date),h=>(d(),u("div",{key:h,class:"date-item"},l(n.formatShortDate(h)),1))),128))]),e("td",null,l(n.formatDiscount(i.special_requests)),1),e("td",null,[e("span",{class:y(["status-badge",i.status])},l(n.getStatusLabel(i.status)),3)]),e("td",Ce,[e("select",{onChange:h=>n.updateApplicationStatus(i,h.target.value),value:i.status,class:"status-select"},t[115]||(t[115]=[e("option",{value:"pending"},"ëŒ€ê¸°ì¤‘",-1),e("option",{value:"approved"},"ìŠ¹ì¸",-1),e("option",{value:"rejected"},"ê±°ë¶€",-1)]),40,Se)])],2))),128))])]),a.applications.length===0?(d(),u("div",we," ì‹ ì²­ìê°€ ì—†ìŠµë‹ˆë‹¤. ")):b("",!0)])])):b("",!0),a.activeTab==="boarding"?(d(),u("div",De,[e("div",_e,[e("div",Fe,[e("div",Te,l(a.boardingStats.total||0),1),t[117]||(t[117]=e("div",{class:"stat-label"},"ì´ ì‹ ì²­",-1))]),e("div",Ae,[e("div",xe,l(a.boardingStats.pending||0),1),t[118]||(t[118]=e("div",{class:"stat-label"},"ëŒ€ê¸°ì¤‘",-1))]),e("div",Me,[e("div",Ee,l(a.boardingStats.confirmed||0),1),t[119]||(t[119]=e("div",{class:"stat-label"},"ìŠ¹ì¸ë¨",-1))]),e("div",Ue,[e("div",Le,l(a.boardingStats.cancelled||0),1),t[120]||(t[120]=e("div",{class:"stat-label"},"ì·¨ì†Œë¨",-1))])]),e("div",Ve,[t[121]||(t[121]=e("h2",null,"ìŠ¹ì„  ì²´í—˜ ì‹ ì²­ì„œ ê´€ë¦¬",-1)),e("div",Be,[e("button",{onClick:t[24]||(t[24]=(...i)=>n.exportBoardingApplications&&n.exportBoardingApplications(...i)),class:"export-btn"},"ì—‘ì…€ ë‹¤ìš´ë¡œë“œ"),e("button",{onClick:t[25]||(t[25]=(...i)=>n.refreshBoardingApplications&&n.refreshBoardingApplications(...i)),class:"refresh-btn"},"ìƒˆë¡œê³ ì¹¨")])]),e("div",Pe,[e("div",Ie,[t[122]||(t[122]=e("label",null,"ì‹ ì²­ì¼ì:",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[26]||(t[26]=i=>a.boardingFilters.startDate=i)},null,512),[[v,a.boardingFilters.startDate]]),t[123]||(t[123]=e("span",null,"~",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[27]||(t[27]=i=>a.boardingFilters.endDate=i)},null,512),[[v,a.boardingFilters.endDate]])]),e("div",Re,[t[125]||(t[125]=e("label",null,"ì²´í—˜ ìœ í˜•:",-1)),p(e("select",{"onUpdate:modelValue":t[28]||(t[28]=i=>a.boardingFilters.experienceType=i)},t[124]||(t[124]=[e("option",{value:""},"ì „ì²´",-1),e("option",{value:"cruise"},"í¬ë£¨ì¦ˆìš”íŠ¸",-1),e("option",{value:"dinghy"},"ë”©ê¸°ìš”íŠ¸",-1),e("option",{value:"paddleboard"},"íŒ¨ë“¤ë³´ë“œ",-1)]),512),[[S,a.boardingFilters.experienceType]])]),e("div",Ne,[t[127]||(t[127]=e("label",null,"ìƒíƒœ:",-1)),p(e("select",{"onUpdate:modelValue":t[29]||(t[29]=i=>a.boardingFilters.status=i)},t[126]||(t[126]=[e("option",{value:""},"ì „ì²´",-1),e("option",{value:"pending"},"ëŒ€ê¸°ì¤‘",-1),e("option",{value:"confirmed"},"ìŠ¹ì¸ë¨",-1),e("option",{value:"cancelled"},"ì·¨ì†Œë¨",-1)]),512),[[S,a.boardingFilters.status]])]),e("button",{onClick:t[30]||(t[30]=(...i)=>n.applyBoardingFilters&&n.applyBoardingFilters(...i)),class:"filter-btn"},"í•„í„° ì ìš©")]),e("div",Oe,[e("table",je,[t[129]||(t[129]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"ì´ë¦„"),e("th",null,"ì—°ë½ì²˜"),e("th",null,"ì´ë©”ì¼"),e("th",null,"ì²´í—˜ ìœ í˜•"),e("th",null,"ì‹œê°„"),e("th",null,"í¬ë§ ë‚ ì§œ"),e("th",null,"ì¸ì›"),e("th",null,"ìƒíƒœ"),e("th",null,"ì‹ ì²­ì¼"),e("th",null,"ì•¡ì…˜")])],-1)),e("tbody",null,[(d(!0),u(f,null,k(a.boardingApplications,i=>(d(),u("tr",{key:i.id},[e("td",null,l(i.id),1),e("td",null,l(i.name),1),e("td",null,l(i.phone),1),e("td",null,l(i.email),1),e("td",null,[e("span",{class:y(["program-badge",i.experienceType])},l(n.getExperienceTypeLabel(i.experienceType)),3)]),e("td",null,l(i.duration||"-"),1),e("td",null,l(n.formatDate(i.desiredDate)),1),e("td",null,l(i.participants)+"ëª…",1),e("td",null,[p(e("select",{"onUpdate:modelValue":h=>i.status=h,onChange:h=>n.updateBoardingApplicationStatus(i,i.status),class:y(["status-select",i.status])},t[128]||(t[128]=[e("option",{value:"pending"},"ëŒ€ê¸°ì¤‘",-1),e("option",{value:"confirmed"},"ìŠ¹ì¸ë¨",-1),e("option",{value:"cancelled"},"ì·¨ì†Œë¨",-1)]),42,ze),[[S,i.status]])]),e("td",null,l(n.formatDate(i.createdAt)),1),e("td",He,[e("button",{onClick:h=>n.viewBoardingApplication(i),class:"view-btn"},"ìƒì„¸ë³´ê¸°",8,qe),e("button",{onClick:h=>n.deleteBoardingApplication(i.id),class:"delete-btn"},"ì‚­ì œ",8,Ye)])]))),128))])])])])):b("",!0),a.activeTab==="education"?(d(),u("div",We,[e("div",Ge,[e("div",Je,[e("div",Ke,l(a.educationStats.total||0),1),t[130]||(t[130]=e("div",{class:"stat-label"},"ì´ ì‹ ì²­",-1))]),e("div",Qe,[e("div",Xe,l(a.educationStats.pending||0),1),t[131]||(t[131]=e("div",{class:"stat-label"},"ëŒ€ê¸°ì¤‘",-1))]),e("div",Ze,[e("div",$e,l(a.educationStats.confirmed||0),1),t[132]||(t[132]=e("div",{class:"stat-label"},"ìŠ¹ì¸ë¨",-1))]),e("div",ts,[e("div",es,l(a.educationStats.thisMonth||0),1),t[133]||(t[133]=e("div",{class:"stat-label"},"ì´ë²ˆë‹¬ ì‹ ì²­",-1))])]),e("div",ss,[t[134]||(t[134]=e("h2",null,"ìš”íŠ¸êµìœ¡ ì‹ ì²­ì ê´€ë¦¬",-1)),e("div",is,[e("button",{onClick:t[31]||(t[31]=(...i)=>n.exportEducationApplications&&n.exportEducationApplications(...i)),class:"export-btn"},"ì—‘ì…€ ë‹¤ìš´ë¡œë“œ"),e("button",{onClick:t[32]||(t[32]=(...i)=>n.refreshEducationApplications&&n.refreshEducationApplications(...i)),class:"refresh-btn"},"ìƒˆë¡œê³ ì¹¨")])]),e("div",as,[e("div",ns,[t[135]||(t[135]=e("label",null,"ì‹ ì²­ì¼ì:",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[33]||(t[33]=i=>a.educationFilters.startDate=i)},null,512),[[v,a.educationFilters.startDate]]),t[136]||(t[136]=e("span",null,"~",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[34]||(t[34]=i=>a.educationFilters.endDate=i)},null,512),[[v,a.educationFilters.endDate]])]),e("div",ls,[t[138]||(t[138]=e("label",null,"êµìœ¡ê³¼ì •:",-1)),p(e("select",{"onUpdate:modelValue":t[35]||(t[35]=i=>a.educationFilters.courseType=i)},t[137]||(t[137]=[e("option",{value:""},"ì „ì²´",-1),e("option",{value:"í¬ë£¨ì¦ˆ"},"í¬ë£¨ì¦ˆ ìš”íŠ¸ êµìœ¡",-1),e("option",{value:"ë”©ê¸°"},"ë”©ê¸° ìš”íŠ¸ êµìœ¡",-1)]),512),[[S,a.educationFilters.courseType]])]),e("div",os,[t[140]||(t[140]=e("label",null,"ìƒíƒœ:",-1)),p(e("select",{"onUpdate:modelValue":t[36]||(t[36]=i=>a.educationFilters.status=i)},t[139]||(t[139]=[e("option",{value:""},"ì „ì²´",-1),e("option",{value:"pending"},"ëŒ€ê¸°ì¤‘",-1),e("option",{value:"approved"},"ìŠ¹ì¸",-1),e("option",{value:"rejected"},"ê±°ë¶€",-1)]),512),[[S,a.educationFilters.status]])]),e("button",{onClick:t[37]||(t[37]=(...i)=>n.applyEducationFilters&&n.applyEducationFilters(...i)),class:"filter-btn"},"í•„í„° ì ìš©")]),e("div",rs,[e("table",ds,[t[142]||(t[142]=e("thead",null,[e("tr",null,[e("th",null,"ì‹ ì²­ì¼"),e("th",null,"ì´ë¦„"),e("th",null,"ì—°ë½ì²˜"),e("th",null,"ì´ë©”ì¼"),e("th",null,"ìƒë…„ì›”ì¼"),e("th",null,"ì„±ë³„"),e("th",null,"ì†Œì¬ì§€"),e("th",null,"êµìœ¡ê³¼ì •"),e("th",null,"ìƒíƒœ"),e("th",null,"ê´€ë¦¬")])],-1)),e("tbody",null,[(d(!0),u(f,null,k(a.educationApplications,i=>(d(),u("tr",{key:i.id,class:y(["app-row",i.status])},[e("td",null,l(n.formatDate(i.createdAt)),1),e("td",us,[e("strong",null,l(i.name),1),i.user_id?b("",!0):(d(),u("span",cs,"ë¹„íšŒì›"))]),e("td",null,l(i.phone),1),e("td",null,l(i.email),1),e("td",null,l(n.formatDate(i.birthDate)),1),e("td",null,l(n.formatGender(i.gender)),1),e("td",hs,l(i.address),1),e("td",ps,[e("span",{class:y(["course-badge",n.getCourseTypeClass(i.courseType)])},l(i.courseType),3)]),e("td",null,[e("span",{class:y(["status-badge",i.status])},l(n.getStatusLabel(i.status)),3)]),e("td",gs,[e("select",{onChange:h=>n.updateEducationApplicationStatus(i,h.target.value),value:i.status,class:"status-select"},t[141]||(t[141]=[e("option",{value:"pending"},"ëŒ€ê¸°ì¤‘",-1),e("option",{value:"approved"},"ìŠ¹ì¸",-1),e("option",{value:"rejected"},"ê±°ë¶€",-1)]),40,ms),e("button",{onClick:h=>n.viewEducationApplication(i),class:"view-btn"},"ìƒì„¸ë³´ê¸°",8,ys),e("button",{onClick:h=>n.deleteEducationApplication(i.id),class:"delete-btn"},"ì‚­ì œ",8,bs)])],2))),128))])]),a.educationApplications.length===0?(d(),u("div",vs," ìš”íŠ¸êµìœ¡ ì‹ ì²­ìê°€ ì—†ìŠµë‹ˆë‹¤. ")):b("",!0)])])):b("",!0),a.activeTab==="notices"?(d(),u("div",fs,[e("div",ks,[t[143]||(t[143]=e("h2",null,"ê³µì§€ì‚¬í•­ ê´€ë¦¬",-1)),e("div",Cs,[e("button",{onClick:t[38]||(t[38]=(...i)=>n.refreshNotices&&n.refreshNotices(...i)),class:"refresh-btn"},"ìƒˆë¡œê³ ì¹¨")])]),e("div",Ss,[e("div",ws,[t[145]||(t[145]=e("label",null,"ì¹´í…Œê³ ë¦¬:",-1)),p(e("select",{"onUpdate:modelValue":t[39]||(t[39]=i=>a.noticeFilters.category=i)},t[144]||(t[144]=[D('<option value="" data-v-7b6fb55d>ì „ì²´</option><option value="exemption" data-v-7b6fb55d>ë©´ì œêµìœ¡</option><option value="cruise" data-v-7b6fb55d>í¬ë£¨ì¦ˆìš”íŠ¸</option><option value="dinghy" data-v-7b6fb55d>ë”©ê¸°ìš”íŠ¸</option><option value="recruitment" data-v-7b6fb55d>ì±„ìš©</option><option value="others" data-v-7b6fb55d>ê¸°íƒ€</option>',6)]),512),[[S,a.noticeFilters.category]])]),e("div",Ds,[t[146]||(t[146]=e("label",null,"ì‘ì„±ì¼ì:",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[40]||(t[40]=i=>a.noticeFilters.startDate=i)},null,512),[[v,a.noticeFilters.startDate]]),t[147]||(t[147]=e("span",null,"~",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[41]||(t[41]=i=>a.noticeFilters.endDate=i)},null,512),[[v,a.noticeFilters.endDate]])]),e("button",{onClick:t[42]||(t[42]=(...i)=>n.applyNoticeFilters&&n.applyNoticeFilters(...i)),class:"filter-btn"},"í•„í„° ì ìš©")]),e("div",_s,[e("table",Fs,[t[148]||(t[148]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"ì¹´í…Œê³ ë¦¬"),e("th",null,"ì œëª©"),e("th",null,"ì‘ì„±ì"),e("th",null,"ì‘ì„±ì¼"),e("th",null,"ì¡°íšŒìˆ˜"),e("th",null,"ìƒíƒœ"),e("th",null,"ì•¡ì…˜")])],-1)),e("tbody",null,[(d(!0),u(f,null,k(a.notices,i=>(d(),u("tr",{key:i.id},[e("td",null,l(i.id),1),e("td",null,[e("span",{class:y(["category-badge",i.categoryClass])},l(n.getCategoryLabel(i.category)),3)]),e("td",Ts,[e("span",As,l(i.title),1),i.important?(d(),u("span",xs,"ì¤‘ìš”")):b("",!0)]),e("td",null,l(i.author||"ê´€ë¦¬ì"),1),e("td",null,l(n.formatDate(i.date)),1),e("td",null,l(i.views),1),e("td",null,[e("span",{class:y(["status-badge",i.published?"published":"draft"])},l(i.published?"ê²Œì‹œì¤‘":"ì„ì‹œì €ì¥"),3)]),e("td",Ms,[e("button",{onClick:h=>n.editNotice(i),class:"edit-btn"},"ìˆ˜ì •",8,Es),e("button",{onClick:h=>n.deleteNotice(i.id),class:"delete-btn"},"ì‚­ì œ",8,Us),e("button",{onClick:h=>n.toggleNoticeStatus(i),class:"toggle-btn"},l(i.published?"ë¹„ê³µê°œ":"ê³µê°œ"),9,Ls)])]))),128))])])]),a.editingNotice?(d(),u("div",Vs,[e("div",Bs,[t[149]||(t[149]=e("h3",null,"ê³µì§€ì‚¬í•­ ìˆ˜ì •",-1)),e("button",{onClick:t[43]||(t[43]=(...i)=>n.cancelNoticeEdit&&n.cancelNoticeEdit(...i)),class:"close-btn"},"âœ•")]),e("div",Ps,[e("div",Is,[t[151]||(t[151]=e("label",null,"ì¹´í…Œê³ ë¦¬",-1)),p(e("select",{"onUpdate:modelValue":t[44]||(t[44]=i=>a.editForm.category_id=i),required:""},t[150]||(t[150]=[D('<option value="exemption" data-v-7b6fb55d>ë©´ì œêµìœ¡</option><option value="cruise" data-v-7b6fb55d>í¬ë£¨ì¦ˆìš”íŠ¸</option><option value="dinghy" data-v-7b6fb55d>ë”©ê¸°ìš”íŠ¸</option><option value="recruitment" data-v-7b6fb55d>ì±„ìš©</option><option value="others" data-v-7b6fb55d>ê¸°íƒ€</option>',5)]),512),[[S,a.editForm.category_id]])]),e("div",Rs,[t[152]||(t[152]=e("label",null,"ì œëª©",-1)),p(e("input",{"onUpdate:modelValue":t[45]||(t[45]=i=>a.editForm.title=i),type:"text",required:""},null,512),[[v,a.editForm.title]])]),e("div",Ns,[t[153]||(t[153]=e("label",null,"ë‚´ìš©",-1)),p(e("textarea",{"onUpdate:modelValue":t[46]||(t[46]=i=>a.editForm.content=i),rows:"8",required:""},null,512),[[v,a.editForm.content]])]),e("div",Os,[e("label",js,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[47]||(t[47]=i=>a.editForm.important=i)},null,512),[[w,a.editForm.important]]),t[154]||(t[154]=C(" ì¤‘ìš” ê³µì§€ì‚¬í•­ ",-1))])]),e("div",zs,[e("button",{onClick:t[48]||(t[48]=(...i)=>n.cancelNoticeEdit&&n.cancelNoticeEdit(...i)),class:"cancel-btn"},"ì·¨ì†Œ"),e("button",{onClick:t[49]||(t[49]=(...i)=>n.saveNoticeEdit&&n.saveNoticeEdit(...i)),class:"save-btn"},"ì €ì¥")])])])):b("",!0)])):b("",!0),a.activeTab==="community"?(d(),u("div",Hs,[e("div",qs,[t[155]||(t[155]=e("h2",null,"ì»¤ë®¤ë‹ˆí‹° ê´€ë¦¬",-1)),e("div",Ys,[e("button",{onClick:t[50]||(t[50]=(...i)=>n.refreshCommunity&&n.refreshCommunity(...i)),class:"refresh-btn"},"ìƒˆë¡œê³ ì¹¨")])]),e("div",Ws,[e("div",Gs,[t[157]||(t[157]=e("label",null,"ì½˜í…ì¸  íƒ€ì…:",-1)),p(e("select",{"onUpdate:modelValue":t[51]||(t[51]=i=>a.communityFilters.contentType=i)},t[156]||(t[156]=[D('<option value="" data-v-7b6fb55d>ì „ì²´</option><option value="posts" data-v-7b6fb55d>ê²Œì‹œê¸€</option><option value="photos" data-v-7b6fb55d>ì‚¬ì§„</option><option value="videos" data-v-7b6fb55d>ë™ì˜ìƒ</option><option value="review" data-v-7b6fb55d>í›„ê¸°ê²Œì‹œíŒ</option><option value="crew" data-v-7b6fb55d>í¬ë£¨ëª¨ì§‘ê²Œì‹œíŒ</option>',6)]),512),[[S,a.communityFilters.contentType]])]),e("div",Js,[t[159]||(t[159]=e("label",null,"ê²Œì‹œíŒ:",-1)),p(e("select",{"onUpdate:modelValue":t[52]||(t[52]=i=>a.communityFilters.board=i)},t[158]||(t[158]=[D('<option value="" data-v-7b6fb55d>ì „ì²´</option><option value="free" data-v-7b6fb55d>ììœ ê²Œì‹œíŒ</option><option value="qna" data-v-7b6fb55d>ì§ˆë¬¸ë‹µë³€</option><option value="review" data-v-7b6fb55d>í›„ê¸°ê²Œì‹œíŒ</option><option value="crew" data-v-7b6fb55d>í¬ë£¨ëª¨ì§‘ê²Œì‹œíŒ</option><option value="gallery" data-v-7b6fb55d>ê°¤ëŸ¬ë¦¬</option>',6)]),512),[[S,a.communityFilters.board]])]),e("div",Ks,[t[160]||(t[160]=e("label",null,"ì‘ì„±ì¼ì:",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[53]||(t[53]=i=>a.communityFilters.startDate=i)},null,512),[[v,a.communityFilters.startDate]]),t[161]||(t[161]=e("span",null,"~",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[54]||(t[54]=i=>a.communityFilters.endDate=i)},null,512),[[v,a.communityFilters.endDate]])]),e("button",{onClick:t[55]||(t[55]=(...i)=>n.applyCommunityFilters&&n.applyCommunityFilters(...i)),class:"filter-btn"},"í•„í„° ì ìš©")]),e("div",Qs,[e("table",Xs,[t[162]||(t[162]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"íƒ€ì…"),e("th",null,"ì¹´í…Œê³ ë¦¬"),e("th",null,"ì œëª©/íŒŒì¼ëª…"),e("th",null,"ì‘ì„±ì"),e("th",null,"ì‘ì„±ì¼"),e("th",null,"ì¡°íšŒìˆ˜"),e("th",null,"ë¯¸ë¦¬ë³´ê¸°"),e("th",null,"ì•¡ì…˜")])],-1)),e("tbody",null,[(d(!0),u(f,null,k(n.filteredCommunityItems,i=>(d(),u("tr",{key:`${i.type}-${i.id}`},[e("td",null,l(i.id),1),e("td",null,[e("span",{class:y(["type-badge",i.type])},l(n.getContentTypeLabel(i.type)),3)]),e("td",null,[e("span",{class:y(["category-badge",i.category])},l(n.getCategoryLabel(i.category)),3)]),e("td",Zs,[e("span",$s,l(i.title||i.filename),1),i.description?(d(),u("div",ti,l(i.description),1)):b("",!0)]),e("td",null,l(i.author),1),e("td",null,l(n.formatDate(i.date)),1),e("td",null,l(i.views||0),1),e("td",ei,[i.type==="photo"?(d(),u("div",si,[e("img",{src:n.getPreviewUrl(i),alt:i.title,class:"preview-image"},null,8,ii)])):i.type==="video"?(d(),u("div",ai,[e("video",{src:n.getPreviewUrl(i),class:"preview-video",muted:""},null,8,ni),e("div",li,l(i.duration||"00:00"),1)])):(d(),u("div",oi,l(i.content?.substring(0,50)||"ë‚´ìš© ì—†ìŒ")+"... ",1))]),e("td",ri,[e("button",{onClick:h=>n.viewCommunityItem(i),class:"view-btn"},"ìƒì„¸ë³´ê¸°",8,di),e("button",{onClick:h=>n.editCommunityItem(i),class:"edit-btn"},"ìˆ˜ì •",8,ui),e("button",{onClick:h=>n.deleteCommunityItem(i),class:"delete-btn"},"ì‚­ì œ",8,ci)])]))),128))])]),n.filteredCommunityItems.length===0?(d(),u("div",hi," í‘œì‹œí•  ì½˜í…ì¸ ê°€ ì—†ìŠµë‹ˆë‹¤. ")):b("",!0)])])):b("",!0),a.activeTab==="excel"?(d(),u("div",pi,[a.authStore.state.token?(d(),x(o,{key:1,authToken:a.authStore.state.token,onSuccess:s.handleExcelSuccess,onError:s.handleExcelError},null,8,["authToken","onSuccess","onError"])):(d(),u("div",gi," ì¸ì¦ í† í°ì´ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”. "))])):b("",!0),a.activeTab==="settings"?(d(),u("div",mi,[e("div",yi,[t[163]||(t[163]=e("h2",null,"ì‹œìŠ¤í…œ ì„¤ì •",-1)),e("div",bi,[e("button",{onClick:t[56]||(t[56]=(...i)=>n.saveAllSettings&&n.saveAllSettings(...i)),class:"save-all-btn",disabled:!a.settingsChanged}," ëª¨ë“  ì„¤ì • ì €ì¥ ",8,vi)])]),e("div",fi,[(d(!0),u(f,null,k(a.settingsTabs,i=>(d(),u("button",{key:i.key,onClick:h=>a.activeSettingsTab=i.key,class:y(["settings-nav-btn",{active:a.activeSettingsTab===i.key}])},[e("i",{class:y(i.icon)},null,2),C(" "+l(i.label),1)],10,ki))),128))]),a.activeSettingsTab==="general"?(d(),u("div",Ci,[t[170]||(t[170]=e("h3",null,"ì‚¬ì´íŠ¸ ê¸°ë³¸ ì„¤ì •",-1)),e("div",Si,[e("div",wi,[t[164]||(t[164]=e("label",null,"ì‚¬ì´íŠ¸ëª…",-1)),p(e("input",{"onUpdate:modelValue":t[57]||(t[57]=i=>a.siteSettings.siteName=i),type:"text",placeholder:"í†µì˜ìš”íŠ¸í•™êµ",onInput:t[58]||(t[58]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[v,a.siteSettings.siteName]])]),e("div",Di,[t[165]||(t[165]=e("label",null,"ì‚¬ì´íŠ¸ ì„¤ëª…",-1)),p(e("textarea",{"onUpdate:modelValue":t[59]||(t[59]=i=>a.siteSettings.siteDescription=i),placeholder:"ë°”ë‹¤ì—ì„œ ê¿ˆì„ í¼ì¹˜ëŠ” ìµœê³ ì˜ ìš”íŠ¸êµìœ¡ê¸°ê´€",onInput:t[60]||(t[60]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[v,a.siteSettings.siteDescription]])]),e("div",_i,[t[166]||(t[166]=e("label",null,"ëŒ€í‘œ ì „í™”ë²ˆí˜¸",-1)),p(e("input",{"onUpdate:modelValue":t[61]||(t[61]=i=>a.siteSettings.phone=i),type:"text",placeholder:"055-641-5051~2",onInput:t[62]||(t[62]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[v,a.siteSettings.phone]])]),e("div",Fi,[t[167]||(t[167]=e("label",null,"ì´ë©”ì¼",-1)),p(e("input",{"onUpdate:modelValue":t[63]||(t[63]=i=>a.siteSettings.email=i),type:"email",placeholder:"ty6415051@hanmail.net",onInput:t[64]||(t[64]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[v,a.siteSettings.email]])]),e("div",Ti,[t[168]||(t[168]=e("label",null,"ì£¼ì†Œ",-1)),p(e("input",{"onUpdate:modelValue":t[65]||(t[65]=i=>a.siteSettings.address=i),type:"text",placeholder:"ê²½ë‚¨ í†µì˜ì‹œ ë„ë‚¨ë¡œ 269-28",onInput:t[66]||(t[66]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[v,a.siteSettings.address]])]),e("div",Ai,[t[169]||(t[169]=e("label",null,"ìš´ì˜ì‹œê°„",-1)),p(e("input",{"onUpdate:modelValue":t[67]||(t[67]=i=>a.siteSettings.businessHours=i),type:"text",placeholder:"í‰ì¼ 09:00 - 18:00",onInput:t[68]||(t[68]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[v,a.siteSettings.businessHours]])])])])):b("",!0),a.activeSettingsTab==="notifications"?(d(),u("div",xi,[t[178]||(t[178]=e("h3",null,"ì•Œë¦¼ ì„¤ì •",-1)),e("div",Mi,[e("div",Ei,[e("label",Ui,[p(e("input",{"onUpdate:modelValue":t[69]||(t[69]=i=>a.notificationSettings.newApplicationAlert=i),type:"checkbox",onChange:t[70]||(t[70]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[w,a.notificationSettings.newApplicationAlert]]),t[171]||(t[171]=e("span",{class:"toggle-slider"},null,-1)),t[172]||(t[172]=C(" ì‹ ê·œ ì‹ ì²­ ì‹œ ì´ë©”ì¼ ì•Œë¦¼ ",-1))]),t[173]||(t[173]=e("p",{class:"setting-desc"},"ìƒˆë¡œìš´ êµìœ¡ ì‹ ì²­ì´ë‚˜ ì²´í—˜ ì‹ ì²­ì´ ìˆì„ ë•Œ ê´€ë¦¬ìì—ê²Œ ì´ë©”ì¼ë¡œ ì•Œë¦¼ì„ ë³´ëƒ…ë‹ˆë‹¤.",-1))]),e("div",Li,[e("label",Vi,[p(e("input",{"onUpdate:modelValue":t[71]||(t[71]=i=>a.notificationSettings.scheduleReminder=i),type:"checkbox",onChange:t[72]||(t[72]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[w,a.notificationSettings.scheduleReminder]]),t[174]||(t[174]=e("span",{class:"toggle-slider"},null,-1)),t[175]||(t[175]=C(" ì¼ì • ë¦¬ë§ˆì¸ë” ì•Œë¦¼ ",-1))]),t[176]||(t[176]=e("p",{class:"setting-desc"},"êµìœ¡ ì¼ì • í•˜ë£¨ ì „ì— ì°¸ê°€ìë“¤ì—ê²Œ ë¦¬ë§ˆì¸ë”ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.",-1))]),e("div",Bi,[t[177]||(t[177]=e("label",null,"ì•Œë¦¼ ì´ë©”ì¼ ì£¼ì†Œ",-1)),p(e("input",{"onUpdate:modelValue":t[73]||(t[73]=i=>a.notificationSettings.adminEmail=i),type:"email",placeholder:"admin@tyyacht.com",onInput:t[74]||(t[74]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[v,a.notificationSettings.adminEmail]])])])])):b("",!0),a.activeSettingsTab==="system"?(d(),u("div",Pi,[t[190]||(t[190]=e("h3",null,"ì‹œìŠ¤í…œ ê´€ë¦¬",-1)),e("div",Ii,[e("div",Ri,[t[179]||(t[179]=e("label",null,"ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ",-1)),e("div",Ni,[e("span",{class:y(["status-indicator",a.dbStatus.connected?"connected":"disconnected"])},l(a.dbStatus.connected?"ì—°ê²°ë¨":"ì—°ê²° ì•ˆë¨"),3),e("button",{onClick:t[75]||(t[75]=(...i)=>n.checkDatabase&&n.checkDatabase(...i)),class:"check-btn"},"ì—°ê²° í™•ì¸")])]),e("div",Oi,[t[182]||(t[182]=e("label",null,"ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…",-1)),e("div",ji,[e("button",{onClick:t[76]||(t[76]=(...i)=>n.createBackup&&n.createBackup(...i)),class:"action-btn primary",disabled:a.isBackupInProgress},[t[180]||(t[180]=e("i",{class:"fas fa-download"},null,-1)),C(" "+l(a.isBackupInProgress?"ë°±ì—… ì¤‘...":"ë°±ì—… ìƒì„±"),1)],8,zi),t[181]||(t[181]=e("p",{class:"setting-desc"},"í˜„ì¬ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°±ì—… íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.",-1))])]),e("div",Hi,[t[185]||(t[185]=e("label",null,"ìºì‹œ ê´€ë¦¬",-1)),e("div",qi,[e("button",{onClick:t[77]||(t[77]=(...i)=>n.clearCache&&n.clearCache(...i)),class:"action-btn secondary"},t[183]||(t[183]=[e("i",{class:"fas fa-trash"},null,-1),C(" ìºì‹œ ì‚­ì œ ",-1)])),t[184]||(t[184]=e("p",{class:"setting-desc"},"ì• í”Œë¦¬ì¼€ì´ì…˜ ìºì‹œë¥¼ ì‚­ì œí•˜ì—¬ ì„±ëŠ¥ì„ ìµœì í™”í•©ë‹ˆë‹¤.",-1))])]),e("div",Yi,[t[189]||(t[189]=e("label",null,"ì‹œìŠ¤í…œ ì •ë³´",-1)),e("div",Wi,[e("div",Gi,[t[188]||(t[188]=e("div",{class:"info-item"},[e("span",{class:"info-label"},"ì„œë²„ ìƒíƒœ:"),e("span",{class:"info-value"},"ì •ìƒ")],-1)),e("div",Ji,[t[186]||(t[186]=e("span",{class:"info-label"},"ì‚¬ìš©ì ìˆ˜:",-1)),e("span",Ki,l(a.stats.totalUsers||0)+"ëª…",1)]),e("div",Qi,[t[187]||(t[187]=e("span",{class:"info-label"},"ì´ ì‹ ì²­ ìˆ˜:",-1)),e("span",Xi,l(a.stats.totalApplications||0)+"ê±´",1)])])])])])])):b("",!0),a.activeSettingsTab==="security"?(d(),u("div",Zi,[t[198]||(t[198]=e("h3",null,"ë³´ì•ˆ ì„¤ì •",-1)),e("div",$i,[e("div",ta,[t[191]||(t[191]=e("label",null,"ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ (ë¶„)",-1)),p(e("input",{"onUpdate:modelValue":t[78]||(t[78]=i=>a.securitySettings.sessionTimeout=i),type:"number",min:"5",max:"480",onInput:t[79]||(t[79]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[v,a.securitySettings.sessionTimeout,void 0,{number:!0}]]),t[192]||(t[192]=e("p",{class:"setting-desc"},"ê´€ë¦¬ì ì„¸ì…˜ì´ ìë™ìœ¼ë¡œ ë§Œë£Œë˜ëŠ” ì‹œê°„ì„ ì„¤ì •í•©ë‹ˆë‹¤.",-1))]),e("div",ea,[t[193]||(t[193]=e("label",null,"ë¡œê·¸ì¸ ì‹¤íŒ¨ ì œí•œ",-1)),p(e("input",{"onUpdate:modelValue":t[80]||(t[80]=i=>a.securitySettings.maxLoginAttempts=i),type:"number",min:"3",max:"10",onInput:t[81]||(t[81]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[v,a.securitySettings.maxLoginAttempts,void 0,{number:!0}]]),t[194]||(t[194]=e("p",{class:"setting-desc"},"ì—°ì† ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ê³„ì •ì„ ì ê·¸ëŠ” íšŸìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.",-1))]),e("div",sa,[e("label",ia,[p(e("input",{"onUpdate:modelValue":t[82]||(t[82]=i=>a.securitySettings.enableTwoFactor=i),type:"checkbox",onChange:t[83]||(t[83]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[w,a.securitySettings.enableTwoFactor]]),t[195]||(t[195]=e("span",{class:"toggle-slider"},null,-1)),t[196]||(t[196]=C(" 2ë‹¨ê³„ ì¸ì¦ í™œì„±í™” ",-1))]),t[197]||(t[197]=e("p",{class:"setting-desc"},"ê´€ë¦¬ì ê³„ì •ì— 2ë‹¨ê³„ ì¸ì¦ì„ ì ìš©í•©ë‹ˆë‹¤.",-1))])])])):b("",!0),a.activeSettingsTab==="theme"?(d(),u("div",aa,[t[204]||(t[204]=e("h3",null,"í…Œë§ˆ ë° ë””ìì¸",-1)),e("div",na,[e("div",la,[t[199]||(t[199]=e("label",null,"ë¸Œëœë“œ ì»¬ëŸ¬",-1)),e("div",oa,[p(e("input",{"onUpdate:modelValue":t[84]||(t[84]=i=>a.themeSettings.primaryColor=i),type:"color",onInput:t[85]||(t[85]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[v,a.themeSettings.primaryColor]]),e("span",ra,l(a.themeSettings.primaryColor),1)])]),e("div",da,[t[201]||(t[201]=e("label",null,"ë¡œê³  ì—…ë¡œë“œ",-1)),e("div",ua,[e("input",{type:"file",ref:"logoFile",onChange:t[86]||(t[86]=(...i)=>s.handleLogoUpload&&s.handleLogoUpload(...i)),accept:"image/*",style:{display:"none"}},null,544),e("button",{onClick:t[87]||(t[87]=i=>s.$refs.logoFile.click()),class:"upload-btn"},t[200]||(t[200]=[e("i",{class:"fas fa-upload"},null,-1),C(" ë¡œê³  ì„ íƒ ",-1)])),a.themeSettings.logoUrl?(d(),u("div",ca,[e("img",{src:a.themeSettings.logoUrl,alt:"ë¡œê³  ë¯¸ë¦¬ë³´ê¸°"},null,8,ha)])):b("",!0)])]),e("div",pa,[e("label",ga,[p(e("input",{"onUpdate:modelValue":t[88]||(t[88]=i=>a.themeSettings.darkMode=i),type:"checkbox",onChange:t[89]||(t[89]=(...i)=>n.markSettingsChanged&&n.markSettingsChanged(...i))},null,544),[[w,a.themeSettings.darkMode]]),t[202]||(t[202]=e("span",{class:"toggle-slider"},null,-1)),t[203]||(t[203]=C(" ë‹¤í¬ ëª¨ë“œ í™œì„±í™” ",-1))])])])])):b("",!0),a.activeSettingsTab==="admin"?(d(),u("div",ma,[t[210]||(t[210]=e("h3",null,"ê´€ë¦¬ì ê³„ì • ì •ë³´",-1)),e("div",ya,[e("div",ba,[t[208]||(t[208]=e("div",{class:"admin-avatar"},[e("i",{class:"fas fa-user-shield"})],-1)),e("div",va,[e("h4",null,l(n.currentUser.fullName),1),e("p",null,[t[205]||(t[205]=e("strong",null,"ì‚¬ìš©ìëª…:",-1)),C(" "+l(n.currentUser.username),1)]),e("p",null,[t[206]||(t[206]=e("strong",null,"ì´ë©”ì¼:",-1)),C(" "+l(n.currentUser.email),1)]),t[207]||(t[207]=e("p",null,[e("strong",null,"ê¶Œí•œ:"),C(" ìµœê³  ê´€ë¦¬ì")],-1))])]),e("div",fa,[e("button",{onClick:t[90]||(t[90]=(...i)=>s.changePassword&&s.changePassword(...i)),class:"action-btn secondary"},t[209]||(t[209]=[e("i",{class:"fas fa-key"},null,-1),C(" ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ",-1)]))])])])):b("",!0)])):b("",!0)])):(d(),u("div",ka,[e("div",Ca,[t[211]||(t[211]=e("h1",null,"ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ",-1)),t[212]||(t[212]=e("p",null,"ê´€ë¦¬ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.",-1)),e("button",{onClick:t[91]||(t[91]=i=>s.$router.push("/login")),class:"login-redirect-btn"},"ë¡œê·¸ì¸í•˜ê¸°")])]))}const Da=F(yt,[["render",Sa],["__scopeId","data-v-7b6fb55d"]]);export{Da as default};
