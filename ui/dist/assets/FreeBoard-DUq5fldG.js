import{_ as g,c as a,a as h,b as s,k as u,t as i,q as d,s as k,v as m,C as _,F as w,e as P,n as C,p as b,l as p,A as y,f as r}from"./index-B24G-8VQ.js";const F={name:"FreeBoard",data(){return{showWriteForm:!1,selectedPost:null,showCommentForm:!1,searchType:"title",searchKeyword:"",currentPage:1,postsPerPage:10,newPost:{title:"",content:""},newComment:{author:"",content:"",password:""},posts:[]}},async mounted(){await this.loadPosts()},computed:{filteredPosts(){return this.searchKeyword?this.posts.filter(n=>{switch(this.searchType){case"title":return n.title.includes(this.searchKeyword);case"content":return n.content.includes(this.searchKeyword);case"author":return n.author_name.includes(this.searchKeyword);case"all":return n.title.includes(this.searchKeyword)||n.content.includes(this.searchKeyword)||n.author_name.includes(this.searchKeyword);default:return!0}}):this.posts},paginatedPosts(){const n=(this.currentPage-1)*this.postsPerPage,t=n+this.postsPerPage;return this.filteredPosts.slice(n,t)},totalPages(){return Math.ceil(this.filteredPosts.length/this.postsPerPage)},visiblePages(){const n=[];let c=Math.max(1,this.currentPage-Math.floor(2.5)),v=Math.min(this.totalPages,c+5-1);v-c+1<5&&(c=Math.max(1,v-5+1));for(let o=c;o<=v;o++)n.push(o);return n},totalComments(){return 0},todayPosts(){const n=new Date().toISOString().split("T")[0];return this.posts.filter(t=>new Date(t.created_at).toISOString().split("T")[0]===n).length}},methods:{async loadPosts(){try{const n=await p.get(`${y}/api/notices?category=free_board`);this.posts=n.data.map(t=>({...t,author_name:t.author_name||"ìµëª…",likes:0,comments:0}))}catch(n){console.error("Failed to load posts:",n),this.posts=[]}},searchPosts(){this.currentPage=1},changePage(n){this.currentPage=n},viewPost(n){n.views++,this.selectedPost=n,this.showCommentForm=!1},likePost(n){n.likes++},async submitPost(){try{const n=await p.post(`${y}/api/notices`,{title:this.newPost.title,content:this.newPost.content,category_id:"free_board"});await this.loadPosts(),this.showWriteForm=!1,this.newPost={title:"",content:""},alert("ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!")}catch(n){console.error("Failed to submit post:",n),alert("ê²Œì‹œê¸€ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},submitComment(){this.selectedPost&&(this.selectedPost.comments++,this.showCommentForm=!1,this.newComment={author:"",content:"",password:""})},formatDate(n){return new Date(n).toLocaleDateString("ko-KR")},isNewPost(n){const t=new Date(n),v=new Date-t;return Math.floor(v/(1e3*60*60*24))<=1},goBack(){this.$router.push("/community")}}},x={class:"free-board"},D={class:"content-section"},V={class:"container"},K={class:"board-stats"},S={class:"stat-item"},B={class:"stat-number"},M={class:"stat-item"},U={class:"stat-number"},T={class:"stat-item"},q={class:"stat-number"},W={class:"board-controls"},N={class:"search-area"},I={class:"posts-table"},A=["onClick"],E={class:"col-number"},L={class:"col-title"},O={class:"title-text"},R={key:0,class:"comment-count"},z={key:1,class:"new-badge"},j={class:"col-author"},G={class:"col-date"},H={class:"col-views"},J={class:"col-likes"},Q={key:0,class:"empty-state"},X={key:1,class:"pagination"},Y=["onClick"],Z={key:2,class:"write-form"},$={class:"form-header"},tt={class:"form-group"},st={class:"form-group"},et={class:"form-group"},ot={class:"form-actions"},nt={key:3,class:"post-detail"},lt={class:"detail-header"},it={class:"detail-meta"},at={class:"detail-content"},rt={class:"detail-actions"},dt={key:0,class:"comment-form"},ct={class:"comment-input-group"},ut={class:"back-button"};function mt(n,t,c,v,o,l){return r(),a("div",x,[t[33]||(t[33]=h('<section class="hero-section" data-v-5a819a87><div class="hero-background" data-v-5a819a87></div><div class="hero-overlay" data-v-5a819a87></div><div class="hero-content" data-v-5a819a87><h1 class="hero-title" data-v-5a819a87>ììœ ê²Œì‹œíŒ</h1><p class="hero-subtitle" data-v-5a819a87>ììœ ë¡­ê²Œ ì˜ê²¬ì„ ë‚˜ëˆ„ê³  ì†Œí†µí•˜ëŠ” ê³µê°„ì…ë‹ˆë‹¤</p></div></section>',1)),s("section",D,[s("div",V,[t[32]||(t[32]=s("div",{class:"board-header"},[s("div",{class:"header-info"},[s("h2",null,"ììœ ê²Œì‹œíŒ"),s("p",null,"í†µì˜ìš”íŠ¸í•™êµì™€ ê´€ë ¨ëœ ëª¨ë“  ì´ì•¼ê¸°ë¥¼ ììœ ë¡­ê²Œ ë‚˜ëˆ„ì–´ ë³´ì„¸ìš”.")]),s("div",{class:"user-notice"},[s("div",{class:"notice-icon"},"ğŸ‘¥"),s("span",null,"ëª¨ë“  ì‚¬ìš©ì")])],-1)),s("div",K,[s("div",S,[s("div",B,i(o.posts.length),1),t[19]||(t[19]=s("div",{class:"stat-label"},"ì´ ê²Œì‹œë¬¼",-1))]),s("div",M,[s("div",U,i(l.totalComments),1),t[20]||(t[20]=s("div",{class:"stat-label"},"ì´ ëŒ“ê¸€",-1))]),s("div",T,[s("div",q,i(l.todayPosts),1),t[21]||(t[21]=s("div",{class:"stat-label"},"ì˜¤ëŠ˜ ê²Œì‹œë¬¼",-1))])]),s("div",W,[s("div",N,[d(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.searchType=e),class:"search-select"},t[22]||(t[22]=[s("option",{value:"title"},"ì œëª©",-1),s("option",{value:"content"},"ë‚´ìš©",-1),s("option",{value:"author"},"ì‘ì„±ì",-1),s("option",{value:"all"},"ì „ì²´",-1)]),512),[[k,o.searchType]]),d(s("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.searchKeyword=e),type:"text",placeholder:"ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”",class:"search-input",onKeyup:t[2]||(t[2]=_((...e)=>l.searchPosts&&l.searchPosts(...e),["enter"]))},null,544),[[m,o.searchKeyword]]),s("button",{onClick:t[3]||(t[3]=(...e)=>l.searchPosts&&l.searchPosts(...e)),class:"search-btn"},"ê²€ìƒ‰")]),s("button",{onClick:t[4]||(t[4]=e=>o.showWriteForm=!0),class:"write-btn"},"âœï¸ ê¸€ì“°ê¸°")]),s("div",I,[t[23]||(t[23]=h('<div class="table-header" data-v-5a819a87><div class="col-number" data-v-5a819a87>ë²ˆí˜¸</div><div class="col-title" data-v-5a819a87>ì œëª©</div><div class="col-author" data-v-5a819a87>ì‘ì„±ì</div><div class="col-date" data-v-5a819a87>ì‘ì„±ì¼</div><div class="col-views" data-v-5a819a87>ì¡°íšŒ</div><div class="col-likes" data-v-5a819a87>ì¢‹ì•„ìš”</div></div>',1)),(r(!0),a(w,null,P(l.paginatedPosts,e=>(r(),a("div",{key:e.id,class:"table-row",onClick:f=>l.viewPost(e)},[s("div",E,i(e.id),1),s("div",L,[s("span",O,i(e.title),1),e.comments>0?(r(),a("span",R,"["+i(e.comments)+"]",1)):u("",!0),l.isNewPost(e.created_at)?(r(),a("span",z,"NEW")):u("",!0)]),s("div",j,i(e.author_name),1),s("div",G,i(l.formatDate(e.created_at)),1),s("div",H,i(e.views),1),s("div",J,i(e.likes),1)],8,A))),128))]),l.filteredPosts.length===0?(r(),a("div",Q,t[24]||(t[24]=[s("div",{class:"empty-icon"},"ğŸ“",-1),s("h3",null,"ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤",-1),s("p",null,"ì²« ë²ˆì§¸ ê²Œì‹œë¬¼ì„ ì‘ì„±í•´ë³´ì„¸ìš”!",-1)]))):u("",!0),l.totalPages>1?(r(),a("div",X,[(r(!0),a(w,null,P(l.visiblePages,e=>(r(),a("button",{onClick:f=>l.changePage(e),key:e,class:C(["page-btn",{active:o.currentPage===e}])},i(e),11,Y))),128))])):u("",!0),o.showWriteForm?(r(),a("div",Z,[s("div",$,[t[25]||(t[25]=s("h3",null,"ê²Œì‹œê¸€ ì‘ì„±",-1)),s("button",{class:"close-btn",onClick:t[5]||(t[5]=e=>o.showWriteForm=!1)},"âœ•")]),s("form",{onSubmit:t[10]||(t[10]=b((...e)=>l.submitPost&&l.submitPost(...e),["prevent"]))},[s("div",tt,[t[26]||(t[26]=s("label",null,"ì œëª©",-1)),d(s("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newPost.title=e),type:"text",required:""},null,512),[[m,o.newPost.title]])]),s("div",st,[t[27]||(t[27]=s("label",null,"ë‚´ìš©",-1)),d(s("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newPost.content=e),rows:"10",required:""},null,512),[[m,o.newPost.content]])]),s("div",et,[t[28]||(t[28]=s("label",null,"ë¹„ë°€ë²ˆí˜¸",-1)),d(s("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.newPost.password=e),type:"password",required:""},null,512),[[m,o.newPost.password]]),t[29]||(t[29]=s("small",null,"ê²Œì‹œê¸€ ìˆ˜ì •/ì‚­ì œ ì‹œ ì‚¬ìš©ë©ë‹ˆë‹¤",-1))]),s("div",ot,[s("button",{type:"button",class:"cancel-btn",onClick:t[9]||(t[9]=e=>o.showWriteForm=!1)}," ì·¨ì†Œ "),t[30]||(t[30]=s("button",{type:"submit",class:"submit-btn"},"ë“±ë¡",-1))])],32)])):u("",!0),o.selectedPost?(r(),a("div",nt,[s("div",lt,[s("h3",null,i(o.selectedPost.title),1),s("button",{class:"close-btn",onClick:t[11]||(t[11]=e=>o.selectedPost=null)},"âœ•")]),s("div",it,[s("span",null,"ì‘ì„±ì: "+i(o.selectedPost.author),1),s("span",null,"ì‘ì„±ì¼: "+i(l.formatDate(o.selectedPost.date)),1),s("span",null,"ì¡°íšŒìˆ˜: "+i(o.selectedPost.views),1),s("span",null,"ì¢‹ì•„ìš”: "+i(o.selectedPost.likes),1)]),s("div",at,i(o.selectedPost.content),1),s("div",rt,[s("button",{onClick:t[12]||(t[12]=e=>l.likePost(o.selectedPost)),class:"like-btn"}," ğŸ‘ ì¢‹ì•„ìš” ("+i(o.selectedPost.likes)+") ",1),s("button",{onClick:t[13]||(t[13]=e=>o.showCommentForm=!o.showCommentForm),class:"comment-btn"}," ğŸ’¬ ëŒ“ê¸€ ("+i(o.selectedPost.comments)+") ",1)]),o.showCommentForm?(r(),a("div",dt,[s("form",{onSubmit:t[17]||(t[17]=b((...e)=>l.submitComment&&l.submitComment(...e),["prevent"]))},[s("div",ct,[d(s("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>o.newComment.author=e),placeholder:"ì‘ì„±ì",required:""},null,512),[[m,o.newComment.author]]),d(s("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>o.newComment.password=e),type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸",required:""},null,512),[[m,o.newComment.password]])]),d(s("textarea",{"onUpdate:modelValue":t[16]||(t[16]=e=>o.newComment.content=e),placeholder:"ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”",rows:"3",required:""},null,512),[[m,o.newComment.content]]),t[31]||(t[31]=s("div",{class:"comment-actions"},[s("button",{type:"submit",class:"comment-submit"},"ëŒ“ê¸€ ë“±ë¡")],-1))],32)])):u("",!0)])):u("",!0)])]),s("div",ut,[s("button",{onClick:t[18]||(t[18]=(...e)=>l.goBack&&l.goBack(...e)),class:"back-btn"}," â† ì»¤ë®¤ë‹ˆí‹°ë¡œ ëŒì•„ê°€ê¸° ")])])}const ht=g(F,[["render",mt],["__scopeId","data-v-5a819a87"]]);export{ht as default};
