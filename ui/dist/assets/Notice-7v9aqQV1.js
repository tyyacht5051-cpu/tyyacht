import{_ as y,c as n,a as v,b as e,k as u,F as f,e as g,n as h,t as l,l as m,A as _,m as b,u as C,f as c}from"./index-9yIbVlal.js";const N={name:"Notice",setup(){return{toast:C()}},data(){return{authStore:b,currentCategory:"all",categories:[{id:"exemption",title:"ë©´ì œêµìœ¡",description:"ìš”íŠ¸ë©´í—ˆ ë©´ì œêµìœ¡ ê´€ë ¨ ê³µì§€ì‚¬í•­",icon:"ğŸ“‹",count:0,latestDate:null,path:"/notice/exemption"},{id:"cruise",title:"í¬ë£¨ì¦ˆìš”íŠ¸",description:"í¬ë£¨ì¦ˆìš”íŠ¸ êµìœ¡ ë° ì²´í—˜ ê´€ë ¨ ê³µì§€",icon:"â›µ",count:0,latestDate:null,path:"/notice/cruise"},{id:"dinghy",title:"ë”©ê¸°ìš”íŠ¸",description:"ë”©ê¸°ìš”íŠ¸ êµìœ¡ ë° ì²´í—˜ ê´€ë ¨ ê³µì§€",icon:"ğŸš¤",count:0,latestDate:null,path:"/notice/dinghy"},{id:"recruitment",title:"ì±„ìš©",description:"ì§ì› ì±„ìš© ë° ëª¨ì§‘ ê³µê³ ",icon:"ğŸ‘¥",count:0,latestDate:null,path:"/notice/recruitment"},{id:"others",title:"ê¸°íƒ€",description:"ê¸°íƒ€ ì¼ë°˜ ê³µì§€ì‚¬í•­",icon:"ğŸ“¢",count:0,latestDate:null,path:"/notice/others"}],allNotices:[]}},computed:{isAdmin(){return this.authStore.state.isAuthenticated&&this.authStore.state.user?.role==="admin"},filterCategories(){return[{id:"all",title:"ì „ì²´",icon:"ğŸ“‹"},...this.categories]},filteredNotices(){return this.currentCategory==="all"?this.allNotices:this.allNotices.filter(s=>s.category_id===this.currentCategory)}},async mounted(){await this.loadData()},methods:{setCurrentCategory(s){if(console.log("ğŸ”µ ì¹´í…Œê³ ë¦¬ í´ë¦­ë¨:",s),s==="all")this.currentCategory=s;else{const t=this.categories.find(i=>i.id===s);console.log("ğŸ” ì°¾ì€ ì¹´í…Œê³ ë¦¬:",t),t&&t.path?(console.log("âœ… ì´ë™í•  ê²½ë¡œ:",t.path),this.$router.push(t.path)):console.log("âŒ ì¹´í…Œê³ ë¦¬ ë˜ëŠ” ê²½ë¡œ ì—†ìŒ")}},viewNotice(s){this.$router.push(`/notice/${s.category_id}/${s.id}`)},async loadData(){try{const s=await m.get(`${_}/api/notices`,{params:{limit:50}});this.allNotices=s.data.filter(i=>!["free_board","review_board","crew_recruitment"].includes(i.category_id)).map(i=>({...i,category:this.getCategoryTitle(i.category_id),categoryClass:i.category_id,date:i.created_at.split("T")[0]}));const t=await m.get(`${_}/api/notices/stats/categories`);this.updateCategoryStats(t.data)}catch(s){console.error("ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜:",s),this.toast.error("ê³µì§€ì‚¬í•­ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","âš ï¸ ë¡œë“œ ì˜¤ë¥˜")}},getCategoryTitle(s){const t=this.categories.find(i=>i.id===s);return t?t.title:"ê¸°íƒ€"},updateCategoryStats(s){this.categories.forEach(t=>{const i=s.find(d=>d.category_id===t.id);i&&(t.count=i.count,t.latestDate=i.latest_date?i.latest_date.split("T")[0]:null)})},manageNotices(){this.$router.push("/admin")},formatDate(s){const t=new Date(s),d=new Date-t,r=Math.floor(d/(1e3*60*60*24));return r===0?"ì˜¤ëŠ˜":r===1?"ì–´ì œ":r<7?`${r}ì¼ ì „`:t.toLocaleDateString("ko-KR")},isNewNotice(s){const t=new Date(s),d=new Date-t;return Math.floor(d/(1e3*60*60*24))<=3}}},w={class:"notice"},D={class:"content-section"},k={class:"container"},x={class:"notice-filter"},S={class:"filter-buttons"},A=["onClick"],T={class:"notices-list"},B={class:"notices-table"},E={key:0,class:"no-notices"},R=["onClick"],L={class:"col-category"},V={class:"col-title"},z={key:0,class:"new-badge"},F={class:"col-date"},M={class:"col-views"},K={key:0,class:"user-info-section"},P={key:1,class:"admin-section"},U={class:"admin-buttons"};function W(s,t,i,d,r,o){return c(),n("div",w,[t[8]||(t[8]=v('<section class="hero-section" data-v-d09c2cbd><div class="hero-background" data-v-d09c2cbd></div><div class="hero-overlay" data-v-d09c2cbd></div><div class="hero-content" data-v-d09c2cbd><h1 class="hero-title" data-v-d09c2cbd>ê³µì§€ì‚¬í•­</h1><p class="hero-subtitle" data-v-d09c2cbd>í†µì˜ìš”íŠ¸í•™êµì˜ ì¤‘ìš”í•œ ì†Œì‹ê³¼ ê³µì§€ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”</p></div></section>',1)),e("section",D,[e("div",k,[t[7]||(t[7]=e("div",{class:"notice-overview"},[e("h2",null,"ê³µì§€ì‚¬í•­ ì•ˆë‚´"),e("p",null," ê° ë¶„ì•¼ë³„ ê³µì§€ì‚¬í•­ê³¼ ì¤‘ìš”í•œ ì•Œë¦¼ì‚¬í•­ì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì†Œì‹ì€ ì •ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤. ")],-1)),e("div",x,[e("div",S,[(c(!0),n(f,null,g(o.filterCategories,a=>(c(),n("button",{key:a.id,onClick:p=>o.setCurrentCategory(a.id),class:h(["filter-btn",{active:r.currentCategory===a.id}])},l(a.icon)+" "+l(a.title),11,A))),128))])]),e("div",T,[t[3]||(t[3]=e("h2",null,"ê³µì§€ì‚¬í•­",-1)),e("div",B,[t[2]||(t[2]=v('<div class="table-header" data-v-d09c2cbd><div class="col-category" data-v-d09c2cbd>ë¶„ë¥˜</div><div class="col-title" data-v-d09c2cbd>ì œëª©</div><div class="col-date" data-v-d09c2cbd>ì‘ì„±ì¼</div><div class="col-views" data-v-d09c2cbd>ì¡°íšŒ</div></div>',1)),o.filteredNotices.length===0?(c(),n("div",E,t[1]||(t[1]=[e("p",null,"ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.",-1)]))):u("",!0),(c(!0),n(f,null,g(o.filteredNotices,a=>(c(),n("div",{key:a.id,class:h(["table-row",{"important-row":a.important}]),onClick:p=>o.viewNotice(a)},[e("div",L,[e("span",{class:h(["category-badge",a.categoryClass])},l(a.category),3)]),e("div",V,[e("span",{class:h(["title-text",{"important-title":a.important}])},l(a.title),3),o.isNewNotice(a.date)?(c(),n("span",z,"NEW")):u("",!0)]),e("div",F,l(o.formatDate(a.date)),1),e("div",M,l(a.views),1)],10,R))),128))])]),!o.isAdmin&&r.authStore.state.isAuthenticated?(c(),n("div",K,t[4]||(t[4]=[e("div",{class:"info-box"},[e("div",{class:"info-icon"},"ğŸ“–"),e("div",{class:"info-text"},[e("h3",null,"ê³µì§€ì‚¬í•­ ì•ˆë‚´"),e("p",null,"ê³µì§€ì‚¬í•­ì€ ê´€ë¦¬ìê°€ ì‘ì„±í•œ ì¤‘ìš”í•œ ì†Œì‹ì…ë‹ˆë‹¤. ëª¨ë“  ê³µì§€ì‚¬í•­ì„ ììœ ë¡­ê²Œ ì—´ëŒí•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.")])],-1)]))):u("",!0),o.isAdmin?(c(),n("div",P,[t[5]||(t[5]=e("h2",null,"ê´€ë¦¬ì ê¸°ëŠ¥",-1)),e("div",U,[e("button",{class:"admin-btn manage-btn",onClick:t[0]||(t[0]=(...a)=>o.manageNotices&&o.manageNotices(...a))}," ğŸ—‚ï¸ ê³µì§€ì‚¬í•­ ê´€ë¦¬ ")]),t[6]||(t[6]=e("p",{style:{"margin-top":"15px",color:"#666","font-size":"0.9rem"}}," ğŸ’¡ ê³µì§€ì‚¬í•­ ì‘ì„±ì€ ê° ì¹´í…Œê³ ë¦¬ í˜ì´ì§€ì—ì„œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ",-1))])):u("",!0)])])])}const j=y(N,[["render",W],["__scopeId","data-v-d09c2cbd"]]);export{j as default};
