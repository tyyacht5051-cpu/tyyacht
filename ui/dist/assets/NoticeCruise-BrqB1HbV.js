import{_ as N,c as n,a as f,b as t,k as u,g as y,w as _,h as k,i as I,t as d,m,v as S,p,C,F as w,e as g,l as F,D as b,s as D,u as x,f as r}from"./index-fXz6EMut.js";const B={name:"NoticeCruise",setup(){return{toast:x()}},data(){return{authStore:D,showWriteForm:!1,searchType:"title",searchKeyword:"",newNotice:{title:"",content:"",images:[]},selectedImages:[],notices:[{id:12,title:"í¬ë£¨ì¦ˆìš”íŠ¸ ì²´í—˜ í”„ë¡œê·¸ë¨ ìš”ê¸ˆ ë³€ê²½ ì•ˆë‚´",content:"2024ë…„ 4ì›”ë¶€í„° í¬ë£¨ì¦ˆìš”íŠ¸ ì²´í—˜ í”„ë¡œê·¸ë¨ ìš”ê¸ˆì´ ì¡°ì •ë©ë‹ˆë‹¤.",date:"2024-03-15",views:89,important:!0},{id:11,title:"í¬ë£¨ì¦ˆìš”íŠ¸ êµìœ¡ ê³¼ì • ì¶”ê°€ ê°œì„¤",content:"ìˆ˜ìš” ì¦ê°€ì— ë”°ë¼ í¬ë£¨ì¦ˆìš”íŠ¸ êµìœ¡ ê³¼ì •ì„ ì¶”ê°€ë¡œ ê°œì„¤í•©ë‹ˆë‹¤.",date:"2024-03-12",views:156,important:!1}]}},mounted(){b.loadCategoryNotices("cruise",this.notices)},computed:{isAdmin(){return this.authStore.state.isAuthenticated&&this.authStore.state.user?.role==="admin"},filteredNotices(){return this.searchKeyword?this.notices.filter(o=>{switch(this.searchType){case"title":return o.title.includes(this.searchKeyword);case"content":return o.content.includes(this.searchKeyword);case"all":return o.title.includes(this.searchKeyword)||o.content.includes(this.searchKeyword);default:return!0}}):this.notices}},methods:{viewNotice(o){o.views++},openWriteForm(){this.showWriteForm=!0},searchNotices(){},handleImageSelection(o){const e=Array.from(o.target.files),c=3,l=5*1024*1024;if(this.selectedImages.length+e.length>c){alert(`ìµœëŒ€ ${c}ê°œì˜ ì´ë¯¸ì§€ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);return}e.forEach(a=>{if(a.size>l){alert(`${a.name} íŒŒì¼ì´ ë„ˆë¬´ í½ë‹ˆë‹¤. (ìµœëŒ€ 5MB)`);return}if(!a.type.startsWith("image/")){alert(`${a.name}ì€ ì´ë¯¸ì§€ íŒŒì¼ì´ ì•„ë‹™ë‹ˆë‹¤.`);return}const i=new FileReader;i.onload=h=>{this.selectedImages.push({file:a,name:a.name,size:a.size,preview:h.target.result})},i.readAsDataURL(a)})},removeImage(o){this.selectedImages.splice(o,1)},formatFileSize(o){if(o===0)return"0 Bytes";const e=1024,c=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(o)/Math.log(e));return parseFloat((o/Math.pow(e,l)).toFixed(2))+" "+c[l]},submitNotice(){if(!this.authStore.state.isAuthenticated){this.toast.urgent("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.","ğŸ” ë¡œê·¸ì¸ í•„ìš”"),this.$router.push("/login");return}if(!this.isAdmin){this.toast.urgent("ê´€ë¦¬ìë§Œ ê³µì§€ì‚¬í•­ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","âš ï¸ ê¶Œí•œ ì—†ìŒ");return}if(!this.newNotice.title||!this.newNotice.content){this.toast.warning("ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.","âœï¸ ì…ë ¥ í™•ì¸");return}const o={id:Math.max(...this.notices.map(e=>e.id))+1,title:this.newNotice.title,content:this.newNotice.content,date:new Date().toISOString().split("T")[0],views:0,important:!1,images:this.selectedImages.map(e=>({name:e.name,size:e.size,preview:e.preview}))};this.notices.unshift(o),b.addNotice(o,"cruise"),this.showWriteForm=!1,this.newNotice={title:"",content:"",images:[]},this.selectedImages=[],this.$refs.imageInput&&(this.$refs.imageInput.value="")},formatDate(o){const e=new Date(o),l=Math.floor((new Date-e)/(1e3*60*60*24));return l===0?"ì˜¤ëŠ˜":l===1?"ì–´ì œ":e.toLocaleDateString("ko-KR")},isNewNotice(o){return Math.floor((new Date-new Date(o))/(1e3*60*60*24))<=3},goBack(){this.$router.push("/notice")}}},M={class:"notice-cruise"},K={class:"content-section"},z={class:"container"},W={class:"notice-header"},V={class:"breadcrumb"},A={class:"notice-info"},T={class:"total-count"},U={class:"search-section"},E={class:"search-controls"},L={key:0,class:"admin-controls"},R={class:"notices-table"},q=["onClick"],G={class:"col-number"},O={class:"col-title"},j={class:"title-text"},H={key:0,class:"new-badge"},J={key:1,class:"important-badge"},P={class:"col-date"},Q={class:"col-views"},X={key:0,class:"write-form"},Y={class:"form-header"},Z={class:"form-group"},$={class:"form-group"},ee={class:"form-group"},te={class:"image-upload-container"},se={key:0,class:"image-preview-container"},ie=["src","alt"],oe={class:"image-info"},ae={class:"image-name"},ne={class:"image-size"},re=["onClick"],le={class:"form-actions"},de={class:"back-button"};function ce(o,e,c,l,a,i){const h=I("router-link");return r(),n("div",M,[e[23]||(e[23]=f('<section class="hero-section" data-v-f7227d71><div class="hero-background" data-v-f7227d71></div><div class="hero-overlay" data-v-f7227d71></div><div class="hero-content" data-v-f7227d71><h1 class="hero-title" data-v-f7227d71>í¬ë£¨ì¦ˆìš”íŠ¸ ê³µì§€ì‚¬í•­</h1><p class="hero-subtitle" data-v-f7227d71>í¬ë£¨ì¦ˆìš”íŠ¸ êµìœ¡ ë° ì²´í—˜ ê´€ë ¨ ê³µì§€ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”</p></div></section>',1)),t("section",K,[t("div",z,[t("div",W,[t("div",V,[y(h,{to:"/notice"},{default:_(()=>e[12]||(e[12]=[k("ê³µì§€ì‚¬í•­",-1)])),_:1,__:[12]}),e[13]||(e[13]=t("span",{class:"separator"},">",-1)),e[14]||(e[14]=t("span",{class:"current"},"í¬ë£¨ì¦ˆìš”íŠ¸",-1))]),t("div",A,[t("span",T,"ì´ "+d(i.filteredNotices.length)+"ê°œ ê²Œì‹œë¬¼",1)])]),t("div",U,[t("div",E,[m(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.searchType=s),class:"search-select"},e[15]||(e[15]=[t("option",{value:"title"},"ì œëª©",-1),t("option",{value:"content"},"ë‚´ìš©",-1),t("option",{value:"all"},"ì „ì²´",-1)]),512),[[S,a.searchType]]),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.searchKeyword=s),type:"text",placeholder:"ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”",class:"search-input",onKeyup:e[2]||(e[2]=C((...s)=>i.searchNotices&&i.searchNotices(...s),["enter"]))},null,544),[[p,a.searchKeyword]]),t("button",{onClick:e[3]||(e[3]=(...s)=>i.searchNotices&&i.searchNotices(...s)),class:"search-btn"},"ê²€ìƒ‰")]),i.isAdmin?(r(),n("div",L,[t("button",{onClick:e[4]||(e[4]=(...s)=>i.openWriteForm&&i.openWriteForm(...s)),class:"write-btn"},"âœï¸ ê¸€ì“°ê¸°")])):u("",!0)]),t("div",R,[e[16]||(e[16]=f('<div class="table-header" data-v-f7227d71><div class="col-number" data-v-f7227d71>ë²ˆí˜¸</div><div class="col-title" data-v-f7227d71>ì œëª©</div><div class="col-date" data-v-f7227d71>ì‘ì„±ì¼</div><div class="col-views" data-v-f7227d71>ì¡°íšŒ</div></div>',1)),(r(!0),n(w,null,g(i.filteredNotices,s=>(r(),n("div",{key:s.id,class:"table-row",onClick:v=>i.viewNotice(s)},[t("div",G,d(s.id),1),t("div",O,[t("span",j,d(s.title),1),i.isNewNotice(s.date)?(r(),n("span",H,"NEW")):u("",!0),s.important?(r(),n("span",J,"ì¤‘ìš”")):u("",!0)]),t("div",P,d(i.formatDate(s.date)),1),t("div",Q,d(s.views),1)],8,q))),128))]),a.showWriteForm&&i.isAdmin?(r(),n("div",X,[t("div",Y,[e[17]||(e[17]=t("h3",null,"í¬ë£¨ì¦ˆìš”íŠ¸ ê³µì§€ì‚¬í•­ ì‘ì„±",-1)),t("button",{class:"close-btn",onClick:e[5]||(e[5]=s=>a.showWriteForm=!1)},"âœ•")]),t("form",{onSubmit:e[10]||(e[10]=F((...s)=>i.submitNotice&&i.submitNotice(...s),["prevent"]))},[t("div",Z,[e[18]||(e[18]=t("label",null,"ì œëª©",-1)),m(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.newNotice.title=s),type:"text",required:""},null,512),[[p,a.newNotice.title]])]),t("div",$,[e[19]||(e[19]=t("label",null,"ë‚´ìš©",-1)),m(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=s=>a.newNotice.content=s),rows:"10",required:""},null,512),[[p,a.newNotice.content]])]),t("div",ee,[e[21]||(e[21]=t("label",null,"ì´ë¯¸ì§€ ì²¨ë¶€ (ìµœëŒ€ 3ê°œ, ê°ê° 5MB ì´í•˜)",-1)),t("div",te,[t("input",{type:"file",ref:"imageInput",onChange:e[8]||(e[8]=(...s)=>i.handleImageSelection&&i.handleImageSelection(...s)),accept:"image/*",multiple:"",class:"image-input",id:"image-upload"},null,544),e[20]||(e[20]=t("label",{for:"image-upload",class:"upload-btn"}," ğŸ“· ì´ë¯¸ì§€ ì„ íƒ ",-1)),a.selectedImages.length>0?(r(),n("div",se,[(r(!0),n(w,null,g(a.selectedImages,(s,v)=>(r(),n("div",{key:v,class:"image-preview"},[t("img",{src:s.preview,alt:s.name},null,8,ie),t("div",oe,[t("span",ae,d(s.name),1),t("span",ne,"("+d(i.formatFileSize(s.size))+")",1)]),t("button",{type:"button",class:"remove-image-btn",onClick:ue=>i.removeImage(v)},"âœ•",8,re)]))),128))])):u("",!0)])]),t("div",le,[t("button",{type:"button",class:"cancel-btn",onClick:e[9]||(e[9]=s=>a.showWriteForm=!1)},"ì·¨ì†Œ"),e[22]||(e[22]=t("button",{type:"submit",class:"submit-btn"},"ë“±ë¡",-1))])],32)])):u("",!0)])]),t("div",de,[t("button",{onClick:e[11]||(e[11]=(...s)=>i.goBack&&i.goBack(...s)),class:"back-btn"},"â† ê³µì§€ì‚¬í•­ìœ¼ë¡œ ëŒì•„ê°€ê¸°")])])}const he=N(B,[["render",ce],["__scopeId","data-v-f7227d71"]]);export{he as default};
