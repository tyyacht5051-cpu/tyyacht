import{_ as F,c as u,b as r,k as w,t as m,p as y,q as t,v as i,h as l,B as a,g as b,x as v,w as h,i as M,m as p,f as g}from"./index-9yIbVlal.js";const k={name:"Login",data(){return{isLogin:!0,errorMessage:"",authStore:p,loginForm:{username:"",password:""},registerForm:{username:"",email:"",password:"",confirmPassword:"",fullName:"",phone:"",birthDate:"",gender:"",termsAgreed:!1,privacyAgreed:!1}}},methods:{toggleMode(){this.isLogin=!this.isLogin,this.errorMessage="",this.resetForms()},resetForms(){this.loginForm={username:"",password:""},this.registerForm={username:"",email:"",password:"",confirmPassword:"",fullName:"",phone:"",birthDate:"",gender:"",termsAgreed:!1,privacyAgreed:!1}},async handleSubmit(){this.errorMessage="",this.isLogin?await this.login():await this.register()},async login(){const n=await p.login(this.loginForm);n.success?this.$router.push("/"):this.errorMessage=this.sanitizeErrorMessage(n.error)},async register(){if(this.registerForm.password!==this.registerForm.confirmPassword){this.errorMessage="비밀번호가 일치하지 않습니다.";return}if(!this.registerForm.termsAgreed||!this.registerForm.privacyAgreed){this.errorMessage="약관에 동의해주세요.";return}const n=await p.register(this.registerForm);n.success?(this.isLogin=!0,this.resetForms(),this.errorMessage="",setTimeout(()=>{this.errorMessage=""},3e3)):this.errorMessage=this.sanitizeErrorMessage(n.error)},sanitizeErrorMessage(n){return{"Invalid credentials":"아이디 또는 비밀번호가 올바르지 않습니다.","User not found":"존재하지 않는 사용자입니다.","Username already exists":"이미 사용 중인 아이디입니다.","Email already exists":"이미 사용 중인 이메일입니다.","Password too short":"비밀번호가 너무 짧습니다. (최소 8자)","Required field missing":"필수 정보가 누락되었습니다.","Terms agreement required":"약관 동의가 필요합니다.","Server error":"서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요."}[n]||"로그인 처리 중 오류가 발생했습니다. 다시 시도해주세요."}}},x={class:"auth-container"},V={class:"auth-card"},U={class:"auth-header"},_={key:0},L={class:"form-group"},q={class:"form-group"},S=["disabled"],A={key:1},N={class:"form-row"},C={class:"form-group"},D={class:"form-group"},P={class:"form-row"},E={class:"form-group"},B={class:"form-group"},T={class:"form-group"},z={class:"form-row"},I={class:"form-group"},R={class:"form-group"},j={class:"form-group"},G={class:"radio-group"},H={class:"radio-label"},J={class:"radio-label"},K={class:"radio-label"},O={class:"agreement-section"},Q={class:"checkbox-group"},W={class:"checkbox-label"},X={class:"checkbox-group"},Y={class:"checkbox-label"},Z=["disabled"],c={class:"auth-toggle"},$={key:0},ee={key:1},re={key:0,class:"error-message"};function se(n,e,oe,te,s,d){const f=M("router-link");return g(),u("div",x,[r("div",V,[r("div",U,[r("h1",null,m(s.isLogin?"로그인":"회원가입"),1),r("p",null,m(s.isLogin?"통영요트학교에 오신것을 환영합니다":"통영요트학교와 함께하세요"),1)]),r("form",{onSubmit:e[14]||(e[14]=y((...o)=>d.handleSubmit&&d.handleSubmit(...o),["prevent"])),class:"auth-form"},[s.isLogin?(g(),u("div",_,[r("div",L,[e[17]||(e[17]=r("label",{for:"username"},"아이디 또는 이메일",-1)),t(r("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.loginForm.username=o),type:"text",id:"username",required:"",placeholder:"아이디 또는 이메일을 입력하세요"},null,512),[[i,s.loginForm.username]])]),r("div",q,[e[18]||(e[18]=r("label",{for:"password"},"비밀번호",-1)),t(r("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.loginForm.password=o),type:"password",id:"password",required:"",placeholder:"비밀번호를 입력하세요"},null,512),[[i,s.loginForm.password]])]),r("button",{type:"submit",class:"auth-button",disabled:s.authStore.state.isLoading},m(s.authStore.state.isLoading?"로그인 중...":"로그인"),9,S)])):(g(),u("div",A,[r("div",N,[r("div",C,[e[19]||(e[19]=r("label",{for:"reg-username"},"아이디*",-1)),t(r("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.registerForm.username=o),type:"text",id:"reg-username",required:"",placeholder:"아이디를 입력하세요"},null,512),[[i,s.registerForm.username]])]),r("div",D,[e[20]||(e[20]=r("label",{for:"reg-email"},"이메일*",-1)),t(r("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.registerForm.email=o),type:"email",id:"reg-email",required:"",placeholder:"이메일을 입력하세요"},null,512),[[i,s.registerForm.email]])])]),r("div",P,[r("div",E,[e[21]||(e[21]=r("label",{for:"reg-password"},"비밀번호*",-1)),t(r("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.registerForm.password=o),type:"password",id:"reg-password",required:"",placeholder:"비밀번호를 입력하세요"},null,512),[[i,s.registerForm.password]])]),r("div",B,[e[22]||(e[22]=r("label",{for:"confirm-password"},"비밀번호 확인*",-1)),t(r("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.registerForm.confirmPassword=o),type:"password",id:"confirm-password",required:"",placeholder:"비밀번호를 다시 입력하세요"},null,512),[[i,s.registerForm.confirmPassword]])])]),r("div",T,[e[23]||(e[23]=r("label",{for:"full-name"},"이름*",-1)),t(r("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.registerForm.fullName=o),type:"text",id:"full-name",required:"",placeholder:"이름을 입력하세요"},null,512),[[i,s.registerForm.fullName]])]),r("div",z,[r("div",I,[e[24]||(e[24]=r("label",{for:"phone"},"전화번호",-1)),t(r("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.registerForm.phone=o),type:"tel",id:"phone",placeholder:"전화번호를 입력하세요"},null,512),[[i,s.registerForm.phone]])]),r("div",R,[e[25]||(e[25]=r("label",{for:"birth-date"},"생년월일",-1)),t(r("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.registerForm.birthDate=o),type:"date",id:"birth-date"},null,512),[[i,s.registerForm.birthDate]])])]),r("div",j,[e[29]||(e[29]=r("label",null,"성별",-1)),r("div",G,[r("label",H,[t(r("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>s.registerForm.gender=o),type:"radio",value:"male"},null,512),[[a,s.registerForm.gender]]),e[26]||(e[26]=l(" 남성 ",-1))]),r("label",J,[t(r("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>s.registerForm.gender=o),type:"radio",value:"female"},null,512),[[a,s.registerForm.gender]]),e[27]||(e[27]=l(" 여성 ",-1))]),r("label",K,[t(r("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>s.registerForm.gender=o),type:"radio",value:"other"},null,512),[[a,s.registerForm.gender]]),e[28]||(e[28]=l(" 기타 ",-1))])])]),r("div",O,[r("div",Q,[r("label",W,[t(r("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>s.registerForm.termsAgreed=o),type:"checkbox",required:""},null,512),[[v,s.registerForm.termsAgreed]]),b(f,{to:"/terms",target:"_blank"},{default:h(()=>e[30]||(e[30]=[l("이용약관",-1)])),_:1,__:[30]}),e[31]||(e[31]=l("에 동의합니다 (필수) ",-1))])]),r("div",X,[r("label",Y,[t(r("input",{"onUpdate:modelValue":e[13]||(e[13]=o=>s.registerForm.privacyAgreed=o),type:"checkbox",required:""},null,512),[[v,s.registerForm.privacyAgreed]]),b(f,{to:"/privacy",target:"_blank"},{default:h(()=>e[32]||(e[32]=[l("개인정보처리방침",-1)])),_:1,__:[32]}),e[33]||(e[33]=l("에 동의합니다 (필수) ",-1))])])]),r("button",{type:"submit",class:"auth-button",disabled:s.authStore.state.isLoading},m(s.authStore.state.isLoading?"가입 중...":"회원가입"),9,Z)]))],32),r("div",c,[s.isLogin?(g(),u("p",$,[e[34]||(e[34]=l(" 계정이 없으신가요? ",-1)),r("button",{onClick:e[15]||(e[15]=(...o)=>d.toggleMode&&d.toggleMode(...o)),class:"toggle-button"},"회원가입")])):(g(),u("p",ee,[e[35]||(e[35]=l(" 이미 계정이 있으신가요? ",-1)),r("button",{onClick:e[16]||(e[16]=(...o)=>d.toggleMode&&d.toggleMode(...o)),class:"toggle-button"},"로그인")]))]),s.errorMessage?(g(),u("div",re,m(s.errorMessage),1)):w("",!0)])])}const le=F(k,[["render",se],["__scopeId","data-v-cf8fb78e"]]);export{le as default};
